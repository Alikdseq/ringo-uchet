# üöÄ –ü–û–õ–ù–´–ô –ü–õ–ê–ù –†–ê–ó–í–ï–†–¢–´–í–ê–ù–ò–Ø PWA –ü–†–ò–õ–û–ñ–ï–ù–ò–Ø RINGO UCHET

**–í–µ—Ä—Å–∏—è:** 1.0  
**–î–∞—Ç–∞:** 2024  
**–ê–≤—Ç–æ—Ä:** –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π DevOps —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç

---

## üìã –û–ì–õ–ê–í–õ–ï–ù–ò–ï

1. [–ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è](#1-–ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ-—Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è)
2. [–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞](#2-–ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞-—Å–µ—Ä–≤–µ—Ä–∞)
3. [–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–æ–º–µ–Ω–∞ –∏ DNS](#3-–Ω–∞—Å—Ç—Ä–æ–π–∫–∞-–¥–æ–º–µ–Ω–∞-–∏-dns)
4. [–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–≥–æ –ü–û](#4-—É—Å—Ç–∞–Ω–æ–≤–∫–∞-–Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–≥–æ-–ø–æ)
5. [–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ Backend (Django)](#5-–ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞-backend-django)
6. [–°–±–æ—Ä–∫–∞ Flutter Web –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è](#6-—Å–±–æ—Ä–∫–∞-flutter-web-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è)
7. [–ù–∞—Å—Ç—Ä–æ–π–∫–∞ PWA –º–∞–Ω–∏—Ñ–µ—Å—Ç–∞ –∏ –∏–∫–æ–Ω–æ–∫](#7-–Ω–∞—Å—Ç—Ä–æ–π–∫–∞-pwa-–º–∞–Ω–∏—Ñ–µ—Å—Ç–∞-–∏-–∏–∫–æ–Ω–æ–∫)
8. [–ù–∞—Å—Ç—Ä–æ–π–∫–∞ Nginx](#8-–Ω–∞—Å—Ç—Ä–æ–π–∫–∞-nginx)
9. [–ù–∞—Å—Ç—Ä–æ–π–∫–∞ HTTPS (SSL)](#9-–Ω–∞—Å—Ç—Ä–æ–π–∫–∞-https-ssl)
10. [–ù–∞—Å—Ç—Ä–æ–π–∫–∞ Docker Compose –¥–ª—è Production](#10-–Ω–∞—Å—Ç—Ä–æ–π–∫–∞-docker-compose-–¥–ª—è-production)
11. [–ó–∞–ø—É—Å–∫ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ](#11-–∑–∞–ø—É—Å–∫-–∏-—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)
12. [–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ](#12-–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥-–∏-–æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ)

---

## 1. –ü–†–ï–î–í–ê–†–ò–¢–ï–õ–¨–ù–´–ï –¢–†–ï–ë–û–í–ê–ù–ò–Ø

### 1.1 –ß—Ç–æ –≤–∞–º –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è:

- ‚úÖ **VPS —Å–µ—Ä–≤–µ—Ä** (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è):
  - –ú–∏–Ω–∏–º—É–º: 2 CPU, 4GB RAM, 20GB SSD
  - –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è: 4 CPU, 8GB RAM, 50GB SSD
  - –û–°: Ubuntu 22.04 LTS –∏–ª–∏ Debian 12
  - –î–æ—Å—Ç—É–ø: SSH —Å root –∏–ª–∏ sudo –ø—Ä–∞–≤–∞–º–∏

- ‚úÖ **–î–æ–º–µ–Ω** (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–ª—è HTTPS):
  - –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –¥–æ–º–µ–Ω (–Ω–∞–ø—Ä–∏–º–µ—Ä: `ringo-uchet.ru`)
  - –î–æ—Å—Ç—É–ø –∫ –ø–∞–Ω–µ–ª–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è DNS

- ‚úÖ **–õ–æ–∫–∞–ª—å–Ω—ã–π –∫–æ–º–ø—å—é—Ç–µ—Ä** —Å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–º:
  - Flutter SDK (–≤–µ—Ä—Å–∏—è 3.0+)
  - Git
  - Docker –∏ Docker Compose (–¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)

---

## 2. –ü–û–î–ì–û–¢–û–í–ö–ê –°–ï–†–í–ï–†–ê

### –®–∞–≥ 2.1: –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–µ—Ä–≤–µ—Ä—É

```bash
# –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ —Å–µ—Ä–≤–µ—Ä—É –ø–æ SSH
ssh root@YOUR_SERVER_IP
# –∏–ª–∏
ssh your_user@YOUR_SERVER_IP
```

### –®–∞–≥ 2.2: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã

```bash
# –û–±–Ω–æ–≤–ª—è–µ–º —Å–ø–∏—Å–æ–∫ –ø–∞–∫–µ—Ç–æ–≤
sudo apt update && sudo apt upgrade -y

# –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –±–∞–∑–æ–≤—ã–µ —É—Ç–∏–ª–∏—Ç—ã
sudo apt install -y curl wget git vim ufw htop
```

### –®–∞–≥ 2.3: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ñ–∞–π—Ä–≤–æ–ª–∞

```bash
# –†–∞–∑—Ä–µ—à–∞–µ–º SSH (–≤–∞–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –ü–ï–†–í–´–ú!)
sudo ufw allow 22/tcp

# –†–∞–∑—Ä–µ—à–∞–µ–º HTTP –∏ HTTPS
sudo ufw allow 80/tcp
sudo ufw allow 443/tcp

# –í–∫–ª—é—á–∞–µ–º —Ñ–∞–π—Ä–≤–æ–ª
sudo ufw enable

# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å
sudo ufw status
```

### –®–∞–≥ 2.4: –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–ª—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –Ω–æ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```bash
# –°–æ–∑–¥–∞–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
sudo adduser ringo
sudo usermod -aG sudo ringo

# –ü–µ—Ä–µ–∫–ª—é—á–∞–µ–º—Å—è –Ω–∞ –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
su - ringo
```

---

## 3. –ù–ê–°–¢–†–û–ô–ö–ê –î–û–ú–ï–ù–ê –ò DNS

### –®–∞–≥ 3.1: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ DNS –∑–∞–ø–∏—Å–µ–π

–í –ø–∞–Ω–µ–ª–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤–∞—à–µ–≥–æ –¥–æ–º–µ–Ω–∞ —Å–æ–∑–¥–∞–π—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ –∑–∞–ø–∏—Å–∏:

**–¢–∏–ø A –∑–∞–ø–∏—Å–∏:**
```
–ò–º—è: @ (–∏–ª–∏ –ø—É—Å—Ç–æ–µ)
–ó–Ω–∞—á–µ–Ω–∏–µ: YOUR_SERVER_IP
TTL: 3600 (–∏–ª–∏ Auto)
```

**–¢–∏–ø A –∑–∞–ø–∏—Å–∏ –¥–ª—è –ø–æ–¥–¥–æ–º–µ–Ω–∞ API (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):**
```
–ò–º—è: api
–ó–Ω–∞—á–µ–Ω–∏–µ: YOUR_SERVER_IP
TTL: 3600
```

**–¢–∏–ø A –∑–∞–ø–∏—Å–∏ –¥–ª—è –ø–æ–¥–¥–æ–º–µ–Ω–∞ WWW (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):**
```
–ò–º—è: www
–ó–Ω–∞—á–µ–Ω–∏–µ: YOUR_SERVER_IP
TTL: 3600
```

### –®–∞–≥ 3.2: –ü—Ä–æ–≤–µ—Ä–∫–∞ DNS

```bash
# –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ DNS –∑–∞–ø–∏—Å–∏ –ø—Ä–∏–º–µ–Ω–∏–ª–∏—Å—å (–º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å –¥–æ 24 —á–∞—Å–æ–≤)
dig your-domain.com
nslookup your-domain.com
```

**–í–∞–∂–Ω–æ:** –î–æ–∂–¥–∏—Ç–µ—Å—å, –ø–æ–∫–∞ DNS –∑–∞–ø–∏—Å–∏ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è—Ç—Å—è (–æ–±—ã—á–Ω–æ 5-30 –º–∏–Ω—É—Ç, –Ω–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –¥–æ 24 —á–∞—Å–æ–≤).

---

## 4. –£–°–¢–ê–ù–û–í–ö–ê –ù–ï–û–ë–•–û–î–ò–ú–û–ì–û –ü–û

### –®–∞–≥ 4.1: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Docker

```bash
# –£–¥–∞–ª—è–µ–º —Å—Ç–∞—Ä—ã–µ –≤–µ—Ä—Å–∏–∏ (–µ—Å–ª–∏ –µ—Å—Ç—å)
sudo apt remove -y docker docker-engine docker.io containerd runc

# –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
sudo apt install -y \
    ca-certificates \
    curl \
    gnupg \
    lsb-release

# –î–æ–±–∞–≤–ª—è–µ–º –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π GPG –∫–ª—é—á Docker
sudo mkdir -p /etc/apt/keyrings
curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /etc/apt/keyrings/docker.gpg

# –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
echo \
  "deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.gpg] https://download.docker.com/linux/ubuntu \
  $(lsb_release -cs) stable" | sudo tee /etc/apt/sources.list.d/docker.list > /dev/null

# –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º Docker
sudo apt update
sudo apt install -y docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin

# –ü—Ä–æ–≤–µ—Ä—è–µ–º —É—Å—Ç–∞–Ω–æ–≤–∫—É
sudo docker --version
sudo docker compose version

# –î–æ–±–∞–≤–ª—è–µ–º —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –≥—Ä—É–ø–ø—É docker (—á—Ç–æ–±—ã –Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å sudo)
sudo usermod -aG docker $USER

# –í—ã—Ö–æ–¥–∏–º –∏ –∑–∞—Ö–æ–¥–∏–º —Å–Ω–æ–≤–∞, —á—Ç–æ–±—ã –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤—Å—Ç—É–ø–∏–ª–∏ –≤ —Å–∏–ª—É
exit
# (–∑–∞—Ç–µ–º —Å–Ω–æ–≤–∞ –ø–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –ø–æ SSH)
```

### –®–∞–≥ 4.2: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Nginx

```bash
# –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º Nginx
sudo apt install -y nginx

# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å
sudo systemctl status nginx

# –í–∫–ª—é—á–∞–µ–º –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫
sudo systemctl enable nginx
```

### –®–∞–≥ 4.3: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Certbot (–¥–ª—è SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤)

```bash
# –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º Certbot
sudo apt install -y certbot python3-certbot-nginx

# –ü—Ä–æ–≤–µ—Ä—è–µ–º —É—Å—Ç–∞–Ω–æ–≤–∫—É
certbot --version
```

---

## 5. –ü–û–î–ì–û–¢–û–í–ö–ê BACKEND (DJANGO)

### –®–∞–≥ 5.1: –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä

```bash
# –ü–µ—Ä–µ—Ö–æ–¥–∏–º –≤ –¥–æ–º–∞—à–Ω—é—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é
cd ~

# –ö–ª–æ–Ω–∏—Ä—É–µ–º –ø—Ä–æ–µ–∫—Ç (–∑–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ –≤–∞—à —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π)
git clone https://github.com/your-username/ringo-uchet.git
# –∏–ª–∏
git clone https://gitlab.com/your-username/ringo-uchet.git

# –ü–µ—Ä–µ—Ö–æ–¥–∏–º –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –ø—Ä–æ–µ–∫—Ç–∞
cd ringo-uchet
```

### –®–∞–≥ 5.2: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è Production

```bash
# –ü–µ—Ä–µ—Ö–æ–¥–∏–º –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é backend
cd backend

# –°–æ–∑–¥–∞–µ–º —Ñ–∞–π–ª .env –¥–ª—è production
nano .env
```

**–°–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞ `backend/.env`:**

```env
# Django Production Settings
DJANGO_SETTINGS_MODULE=ringo_backend.settings.production
DJANGO_SECRET_KEY=–í–ê–®_–°–ï–ö–†–ï–¢–ù–´–ô_–ö–õ–Æ–ß_–°–ì–ï–ù–ï–†–ò–†–£–ô–¢–ï_–ù–û–í–´–ô
DJANGO_DEBUG=False
DJANGO_ALLOWED_HOSTS=your-domain.com,www.your-domain.com,api.your-domain.com,YOUR_SERVER_IP

# CORS - —Ä–∞–∑—Ä–µ—à–∞–µ–º —Ç–æ–ª—å–∫–æ –≤–∞—à –¥–æ–º–µ–Ω
CORS_ALLOWED_ORIGINS=https://your-domain.com,https://www.your-domain.com
CORS_ALLOW_CREDENTIALS=True

# Database
POSTGRES_DB=ringo_prod
POSTGRES_USER=ringo_user
POSTGRES_PASSWORD=–í–ê–®_–°–ò–õ–¨–ù–´–ô_–ü–ê–†–û–õ–¨_–ë–î
POSTGRES_HOST=db
POSTGRES_PORT=5432

# Redis
REDIS_URL=redis://redis:6379/0
CELERY_BROKER_URL=redis://redis:6379/0
CELERY_RESULT_BACKEND=redis://redis:6379/0

# Email (–Ω–∞—Å—Ç—Ä–æ–π—Ç–µ —Å–≤–æ–π SMTP)
EMAIL_HOST=smtp.gmail.com
EMAIL_PORT=587
EMAIL_USE_TLS=True
EMAIL_HOST_USER=your-email@gmail.com
EMAIL_HOST_PASSWORD=your-app-password

# S3/MinIO (–¥–ª—è production –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ä–µ–∞–ª—å–Ω—ã–π S3 –∏–ª–∏ –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ MinIO)
AWS_ACCESS_KEY_ID=your-access-key
AWS_SECRET_ACCESS_KEY=your-secret-key
AWS_BUCKET=ringo-media-prod
AWS_S3_ENDPOINT_URL=http://minio:9000
AWS_S3_REGION_NAME=us-east-1

# MinIO
MINIO_ROOT_USER=minioadmin
MINIO_ROOT_PASSWORD=–í–ê–®_–°–ò–õ–¨–ù–´–ô_–ü–ê–†–û–õ–¨_MINIO

# Encryption (—Å–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ –Ω–æ–≤—ã–π –∫–ª—é—á)
ENCRYPTION_KEY=–í–ê–®_–ö–õ–Æ–ß_–®–ò–§–†–û–í–ê–ù–ò–Ø

# JWT
JWT_ACCESS_MINUTES=30
JWT_REFRESH_DAYS=7

# Notifications (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
FCM_SERVER_KEY=
TELEGRAM_BOT_TOKEN=
SMS_API_KEY=
SMS_API_URL=
```

**–í–∞–∂–Ω–æ:** 
- –°–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ `DJANGO_SECRET_KEY`: `python -c "from django.core.management.utils import get_random_secret_key; print(get_random_secret_key())"`
- –°–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ `ENCRYPTION_KEY`: `python -c "from cryptography.fernet import Fernet; print(Fernet.generate_key().decode())"`

### –®–∞–≥ 5.3: –°–æ–∑–¥–∞–Ω–∏–µ production docker-compose —Ñ–∞–π–ª–∞

```bash
# –í–æ–∑–≤—Ä–∞—â–∞–µ–º—Å—è –≤ –∫–æ—Ä–µ–Ω—å –ø—Ä–æ–µ–∫—Ç–∞
cd ~/ringo-uchet

# –°–æ–∑–¥–∞–µ–º production docker-compose —Ñ–∞–π–ª
nano docker-compose.prod.yml
```

**–°–æ–¥–µ—Ä–∂–∏–º–æ–µ `docker-compose.prod.yml`:**

```yaml
version: '3.8'

services:
  django-api:
    build:
      context: ./backend
      dockerfile: Dockerfile
    command: gunicorn ringo_backend.wsgi:application --bind 0.0.0.0:8000 --workers 4 --timeout 120
    env_file:
      - backend/.env
    volumes:
      - ./backend:/app
      - static_volume:/app/staticfiles
      - media_volume:/app/media
    depends_on:
      - db
      - redis
      - minio
    networks:
      - ringo-net
    restart: unless-stopped

  celery:
    build:
      context: ./backend
      dockerfile: Dockerfile
    command: celery -A ringo_backend worker --loglevel=info --concurrency=4
    env_file:
      - backend/.env
    volumes:
      - ./backend:/app
    depends_on:
      - django-api
      - redis
    networks:
      - ringo-net
    restart: unless-stopped

  celery-beat:
    build:
      context: ./backend
      dockerfile: Dockerfile
    command: celery -A ringo_backend beat --loglevel=info
    env_file:
      - backend/.env
    volumes:
      - ./backend:/app
    depends_on:
      - django-api
      - redis
    networks:
      - ringo-net
    restart: unless-stopped

  db:
    image: postgres:15-alpine
    environment:
      POSTGRES_DB: ${POSTGRES_DB}
      POSTGRES_USER: ${POSTGRES_USER}
      POSTGRES_PASSWORD: ${POSTGRES_PASSWORD}
    volumes:
      - postgres_data:/var/lib/postgresql/data
    networks:
      - ringo-net
    restart: unless-stopped
    healthcheck:
      test: ["CMD-SHELL", "pg_isready -U ${POSTGRES_USER}"]
      interval: 10s
      timeout: 5s
      retries: 5

  redis:
    image: redis:7-alpine
    volumes:
      - redis_data:/data
    networks:
      - ringo-net
    restart: unless-stopped
    healthcheck:
      test: ["CMD", "redis-cli", "ping"]
      interval: 10s
      timeout: 5s
      retries: 5

  minio:
    image: minio/minio:latest
    command: server /data --console-address ":9001"
    environment:
      MINIO_ROOT_USER: ${MINIO_ROOT_USER}
      MINIO_ROOT_PASSWORD: ${MINIO_ROOT_PASSWORD}
    volumes:
      - minio_data:/data
    ports:
      - "9000:9000"
      - "9001:9001"
    networks:
      - ringo-net
    restart: unless-stopped
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:9000/minio/health/live"]
      interval: 30s
      timeout: 20s
      retries: 3

volumes:
  postgres_data:
  redis_data:
  minio_data:
  static_volume:
  media_volume:

networks:
  ringo-net:
    driver: bridge
```

---

## 6. –°–ë–û–†–ö–ê FLUTTER WEB –ü–†–ò–õ–û–ñ–ï–ù–ò–Ø

### –®–∞–≥ 6.1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –Ω–∞ –ª–æ–∫–∞–ª—å–Ω–æ–º –∫–æ–º–ø—å—é—Ç–µ—Ä–µ

```bash
# –ù–∞ –≤–∞—à–µ–º –ª–æ–∫–∞–ª—å–Ω–æ–º –∫–æ–º–ø—å—é—Ç–µ—Ä–µ –ø–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é mobile
cd mobile

# –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ Flutter —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
flutter --version

# –û–±–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
flutter pub get

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ web –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –≤–∫–ª—é—á–µ–Ω–∞
flutter config --enable-web
```

### –®–∞–≥ 6.2: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –¥–ª—è Production

–û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª `mobile/lib/core/config/app_config.dart` –∏ —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ production –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ –≤–∞—à –¥–æ–º–µ–Ω:

```dart
static AppConfig get prod => const AppConfig(
  flavor: AppFlavor.prod,
  apiBaseUrl: 'https://your-domain.com',  // –ò–ó–ú–ï–ù–ò–¢–ï –ù–ê –í–ê–® –î–û–ú–ï–ù
  apiVersion: 'v1',
  enableLogging: false,
  enableCrashlytics: true,
  appName: 'Ringo Uchet',
  packageName: 'com.ringo.prod',
);
```

### –®–∞–≥ 6.3: –°–±–æ—Ä–∫–∞ Flutter Web –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

```bash
# –û—á–∏—Å—Ç–∫–∞ –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö —Å–±–æ—Ä–æ–∫
flutter clean

# –°–±–æ—Ä–∫–∞ –¥–ª—è production
flutter build web --release --base-href / --dart-define=FLUTTER_WEB_USE_SKIA=true

# –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ —Å–±–æ—Ä–∫–∞ –ø—Ä–æ—à–ª–∞ —É—Å–ø–µ—à–Ω–æ
ls -la build/web/
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –í –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `mobile/build/web/` –¥–æ–ª–∂–Ω—ã –ø–æ—è–≤–∏—Ç—å—Å—è —Ñ–∞–π–ª—ã:
- `index.html`
- `main.dart.js`
- `flutter.js`
- `manifest.json`
- –∏ –¥—Ä—É–≥–∏–µ —Ñ–∞–π–ª—ã

### –®–∞–≥ 6.4: –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–±—Ä–∞–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ –Ω–∞ —Å–µ—Ä–≤–µ—Ä

```bash
# –°–æ–∑–¥–∞–µ–º –∞—Ä—Ö–∏–≤ —Å–æ —Å–±–æ—Ä–∫–æ–π
cd mobile/build
tar -czf web-build.tar.gz web/

# –ö–æ–ø–∏—Ä—É–µ–º –Ω–∞ —Å–µ—Ä–≤–µ—Ä (–∑–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ –≤–∞—à–∏ –¥–∞–Ω–Ω—ã–µ)
scp web-build.tar.gz ringo@YOUR_SERVER_IP:~/

# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ —Ä–∞—Å–ø–∞–∫–æ–≤—ã–≤–∞–µ–º
ssh ringo@YOUR_SERVER_IP
cd ~
mkdir -p /var/www/ringo-uchet
tar -xzf web-build.tar.gz -C /var/www/ringo-uchet --strip-components=1
```

**–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π —Å–ø–æ—Å–æ–± (—á–µ—Ä–µ–∑ Git):**

```bash
# –ù–∞ –ª–æ–∫–∞–ª—å–Ω–æ–º –∫–æ–º–ø—å—é—Ç–µ—Ä–µ
cd mobile/build
git init
git add web/
git commit -m "Web build"
git remote add production ringo@YOUR_SERVER_IP:/var/www/ringo-uchet.git
git push production main

# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ
cd /var/www/ringo-uchet
git clone ~/ringo-uchet.git .
```

---

## 7. –ù–ê–°–¢–†–û–ô–ö–ê PWA –ú–ê–ù–ò–§–ï–°–¢–ê –ò –ò–ö–û–ù–û–ö

### –®–∞–≥ 7.1: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ manifest.json

```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ
nano /var/www/ringo-uchet/manifest.json
```

**–û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π `manifest.json`:**

```json
{
    "name": "Ringo Uchet - –£—á–µ—Ç –∞—Ä–µ–Ω–¥—ã —Å–ø–µ—Ü—Ç–µ—Ö–Ω–∏–∫–∏",
    "short_name": "Ringo Uchet",
    "start_url": "/",
    "display": "standalone",
    "background_color": "#ffffff",
    "theme_color": "#0175C2",
    "description": "–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∞—Ä–µ–Ω–¥–æ–π —Å–ø–µ—Ü—Ç–µ—Ö–Ω–∏–∫–∏",
    "orientation": "any",
    "prefer_related_applications": false,
    "scope": "/",
    "icons": [
        {
            "src": "icons/Icon-192.png",
            "sizes": "192x192",
            "type": "image/png",
            "purpose": "any"
        },
        {
            "src": "icons/Icon-512.png",
            "sizes": "512x512",
            "type": "image/png",
            "purpose": "any"
        },
        {
            "src": "icons/Icon-maskable-192.png",
            "sizes": "192x192",
            "type": "image/png",
            "purpose": "maskable"
        },
        {
            "src": "icons/Icon-maskable-512.png",
            "sizes": "512x512",
            "type": "image/png",
            "purpose": "maskable"
        }
    ],
    "screenshots": [],
    "categories": ["business", "productivity"],
    "shortcuts": [
        {
            "name": "–ù–æ–≤–∞—è –∑–∞—è–≤–∫–∞",
            "short_name": "–ó–∞—è–≤–∫–∞",
            "description": "–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –∑–∞—è–≤–∫—É",
            "url": "/orders/create",
            "icons": [
                {
                    "src": "icons/Icon-192.png",
                    "sizes": "192x192"
                }
            ]
        }
    ]
}
```

### –®–∞–≥ 7.2: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ index.html

```bash
nano /var/www/ringo-uchet/index.html
```

**–û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π `index.html` (–≤–∞–∂–Ω—ã–µ —á–∞—Å—Ç–∏):**

```html
<!DOCTYPE html>
<html>
<head>
  <base href="/">
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="description" content="Ringo Uchet - –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∞—Ä–µ–Ω–¥–æ–π —Å–ø–µ—Ü—Ç–µ—Ö–Ω–∏–∫–∏">
  <meta name="theme-color" content="#0175C2">
  
  <!-- iOS meta tags -->
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="Ringo Uchet">
  <link rel="apple-touch-icon" href="icons/Icon-192.png">
  
  <!-- Favicon -->
  <link rel="icon" type="image/png" href="favicon.png"/>
  
  <title>Ringo Uchet - –£—á–µ—Ç –∞—Ä–µ–Ω–¥—ã —Å–ø–µ—Ü—Ç–µ—Ö–Ω–∏–∫–∏</title>
  <link rel="manifest" href="manifest.json">
</head>
<body>
  <script>
    // Service Worker —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('/flutter_service_worker.js')
          .then((registration) => {
            console.log('Service Worker registered:', registration);
          })
          .catch((error) => {
            console.log('Service Worker registration failed:', error);
          });
      });
    }
  </script>
  <script src="flutter_bootstrap.js" async></script>
</body>
</html>
```

### –®–∞–≥ 7.3: –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–∫–æ–Ω–æ–∫

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ –∏–∫–æ–Ω–∫–∏ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç:

```bash
ls -la /var/www/ringo-uchet/icons/
# –î–æ–ª–∂–Ω—ã –±—ã—Ç—å:
# - Icon-192.png
# - Icon-512.png
# - Icon-maskable-192.png
# - Icon-maskable-512.png
```

–ï—Å–ª–∏ –∏–∫–æ–Ω–æ–∫ –Ω–µ—Ç, —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ –∏—Ö –∏–∑ `mobile/web/icons/` –∏–ª–∏ —Å–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–µ.

---

## 8. –ù–ê–°–¢–†–û–ô–ö–ê NGINX

### –®–∞–≥ 8.1: –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Nginx

```bash
sudo nano /etc/nginx/sites-available/ringo-uchet
```

**–°–æ–¥–µ—Ä–∂–∏–º–æ–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:**

```nginx
# HTTP —Å–µ—Ä–≤–µ—Ä - —Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ HTTPS
server {
    listen 80;
    listen [::]:80;
    server_name your-domain.com www.your-domain.com;

    # –†–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ HTTPS
    return 301 https://$server_name$request_uri;
}

# HTTPS —Å–µ—Ä–≤–µ—Ä
server {
    listen 443 ssl http2;
    listen [::]:443 ssl http2;
    server_name your-domain.com www.your-domain.com;

    # SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã (–±—É–¥—É—Ç –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã Certbot)
    ssl_certificate /etc/letsencrypt/live/your-domain.com/fullchain.pem;
    ssl_certificate_key /etc/letsencrypt/live/your-domain.com/privkey.pem;
    
    # SSL –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
    ssl_protocols TLSv1.2 TLSv1.3;
    ssl_ciphers HIGH:!aNULL:!MD5;
    ssl_prefer_server_ciphers on;
    ssl_session_cache shared:SSL:10m;
    ssl_session_timeout 10m;

    # –õ–æ–≥–∏
    access_log /var/log/nginx/ringo-uchet-access.log;
    error_log /var/log/nginx/ringo-uchet-error.log;

    # –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –∑–∞–≥—Ä—É–∂–∞–µ–º—ã—Ö —Ñ–∞–π–ª–æ–≤
    client_max_body_size 100M;

    # –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã Flutter Web –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
    location / {
        root /var/www/ringo-uchet;
        index index.html;
        try_files $uri $uri/ /index.html;
        
        # –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ñ–∞–π–ª–æ–≤
        location ~* \.(js|css|png|jpg|jpeg|gif|ico|svg|woff|woff2|ttf|eot)$ {
            expires 1y;
            add_header Cache-Control "public, immutable";
        }
        
        # –ë–µ–∑ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è –¥–ª—è HTML
        location ~* \.html$ {
            expires -1;
            add_header Cache-Control "no-store, no-cache, must-revalidate, proxy-revalidate";
        }
    }

    # API –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ –∫ Django
    location /api/ {
        proxy_pass http://127.0.0.1:8001;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        proxy_set_header X-Forwarded-Host $server_name;
        
        # –¢–∞–π–º–∞—É—Ç—ã
        proxy_connect_timeout 60s;
        proxy_send_timeout 60s;
        proxy_read_timeout 60s;
        
        # WebSocket –ø–æ–¥–¥–µ—Ä–∂–∫–∞ (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection "upgrade";
    }

    # –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã Django (CSS, JS, –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è)
    location /static/ {
        alias /var/www/ringo-uchet/staticfiles/;
        expires 1y;
        add_header Cache-Control "public, immutable";
    }

    # –ú–µ–¥–∏–∞ —Ñ–∞–π–ª—ã Django (–∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏)
    location /media/ {
        alias /var/www/ringo-uchet/media/;
        expires 1y;
        add_header Cache-Control "public";
    }

    # –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤
    add_header X-Frame-Options "SAMEORIGIN" always;
    add_header X-Content-Type-Options "nosniff" always;
    add_header X-XSS-Protection "1; mode=block" always;
    add_header Referrer-Policy "no-referrer-when-downgrade" always;
    
    # PWA –ø–æ–¥–¥–µ—Ä–∂–∫–∞
    add_header Service-Worker-Allowed "/" always;
}

# –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ: –ø–æ–¥–¥–æ–º–µ–Ω –¥–ª—è API
server {
    listen 443 ssl http2;
    listen [::]:443 ssl http2;
    server_name api.your-domain.com;

    ssl_certificate /etc/letsencrypt/live/your-domain.com/fullchain.pem;
    ssl_certificate_key /etc/letsencrypt/live/your-domain.com/privkey.pem;

    access_log /var/log/nginx/ringo-api-access.log;
    error_log /var/log/nginx/ringo-api-error.log;

    client_max_body_size 100M;

    location / {
        proxy_pass http://127.0.0.1:8001;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        
        proxy_connect_timeout 60s;
        proxy_send_timeout 60s;
        proxy_read_timeout 60s;
    }
}
```

### –®–∞–≥ 8.2: –ê–∫—Ç–∏–≤–∞—Ü–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

```bash
# –°–æ–∑–¥–∞–µ–º —Å–∏–º–≤–æ–ª–∏—á–µ—Å–∫—É—é —Å—Å—ã–ª–∫—É
sudo ln -s /etc/nginx/sites-available/ringo-uchet /etc/nginx/sites-enabled/

# –£–¥–∞–ª—è–µ–º –¥–µ—Ñ–æ–ª—Ç–Ω—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é (–µ—Å–ª–∏ –Ω–µ –Ω—É–∂–Ω–∞)
sudo rm /etc/nginx/sites-enabled/default

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –Ω–∞ –æ—à–∏–±–∫–∏
sudo nginx -t

# –ï—Å–ª–∏ –≤—Å–µ –û–ö, –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ–º Nginx
sudo systemctl reload nginx
```

---

## 9. –ù–ê–°–¢–†–û–ô–ö–ê HTTPS (SSL)

### –®–∞–≥ 9.1: –ü–æ–ª—É—á–µ–Ω–∏–µ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞ —á–µ—Ä–µ–∑ Let's Encrypt

```bash
# –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º Nginx –≤—Ä–µ–º–µ–Ω–Ω–æ (Certbot –∑–∞–ø—É—Å—Ç–∏—Ç —Å–≤–æ–π –≤–µ–±-—Å–µ—Ä–≤–µ—Ä)
sudo systemctl stop nginx

# –ü–æ–ª—É—á–∞–µ–º —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç
sudo certbot certonly --standalone -d your-domain.com -d www.your-domain.com

# –ï—Å–ª–∏ –Ω—É–∂–µ–Ω –ø–æ–¥–¥–æ–º–µ–Ω –¥–ª—è API:
sudo certbot certonly --standalone -d api.your-domain.com

# –ó–∞–ø—É—Å–∫–∞–µ–º Nginx –æ–±—Ä–∞—Ç–Ω–æ
sudo systemctl start nginx
```

**–í–∞–∂–Ω–æ:** –ü–µ—Ä–µ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ–º –∫–æ–º–∞–Ω–¥—ã —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ:
- –î–æ–º–µ–Ω —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ –≤–∞—à —Å–µ—Ä–≤–µ—Ä (–ø—Ä–æ–≤–µ—Ä—å—Ç–µ: `dig your-domain.com`)
- –ü–æ—Ä—Ç 80 –æ—Ç–∫—Ä—ã—Ç –≤ —Ñ–∞–π—Ä–≤–æ–ª–µ

### –®–∞–≥ 9.2: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Nginx —Å SSL

–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —É–∂–µ —Å–æ–¥–µ—Ä–∂–∏—Ç SSL –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (—Å–º. –®–∞–≥ 8.1), –ø—Ä–æ—Å—Ç–æ —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø—É—Ç–∏ –∫ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞–º –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ.

### –®–∞–≥ 9.3: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞

```bash
# –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ
sudo certbot renew --dry-run

# –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º cron –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
sudo crontab -e
# –î–æ–±–∞–≤—å—Ç–µ —Å—Ç—Ä–æ–∫—É:
0 0 * * * certbot renew --quiet --post-hook "systemctl reload nginx"
```

---

## 10. –ù–ê–°–¢–†–û–ô–ö–ê DOCKER COMPOSE –î–õ–Ø PRODUCTION

### –®–∞–≥ 10.1: –ó–∞–ø—É—Å–∫ Backend —Å–µ—Ä–≤–∏—Å–æ–≤

```bash
# –ü–µ—Ä–µ—Ö–æ–¥–∏–º –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –ø—Ä–æ–µ–∫—Ç–∞
cd ~/ringo-uchet

# –ó–∞–ø—É—Å–∫–∞–µ–º —Å–µ—Ä–≤–∏—Å—ã
docker compose -f docker-compose.prod.yml up -d

# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å
docker compose -f docker-compose.prod.yml ps

# –°–º–æ—Ç—Ä–∏–º –ª–æ–≥–∏
docker compose -f docker-compose.prod.yml logs -f
```

### –®–∞–≥ 10.2: –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π

```bash
# –ü—Ä–∏–º–µ–Ω—è–µ–º –º–∏–≥—Ä–∞—Ü–∏–∏
docker compose -f docker-compose.prod.yml exec django-api python manage.py migrate

# –°–æ–±–∏—Ä–∞–µ–º —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã
docker compose -f docker-compose.prod.yml exec django-api python manage.py collectstatic --noinput
```

### –®–∞–≥ 10.3: –°–æ–∑–¥–∞–Ω–∏–µ —Å—É–ø–µ—Ä–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

```bash
# –í—Ö–æ–¥–∏–º –≤ Django shell
docker compose -f docker-compose.prod.yml exec django-api python manage.py shell

# –í Python shell:
from users.models import User
User.objects.create_superuser(
    phone='+79991234567',
    email='admin@your-domain.com',
    password='–í–ê–®_–°–ò–õ–¨–ù–´–ô_–ü–ê–†–û–õ–¨',
    role='admin',
    first_name='Admin',
    last_name='User'
)
exit()
```

### –®–∞–≥ 10.4: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞ –¥–ª—è —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ñ–∞–π–ª–æ–≤

```bash
# –ö–æ–ø–∏—Ä—É–µ–º —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã –∏–∑ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
docker compose -f docker-compose.prod.yml exec django-api python manage.py collectstatic --noinput

# –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º –ø—Ä–∞–≤–∞
sudo chown -R www-data:www-data /var/www/ringo-uchet
sudo chmod -R 755 /var/www/ringo-uchet
```

---

## 11. –ó–ê–ü–£–°–ö –ò –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï

### –®–∞–≥ 11.1: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã Backend API

```bash
# –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ API –æ—Ç–≤–µ—á–∞–µ—Ç
curl https://your-domain.com/api/health/
# –∏–ª–∏
curl https://api.your-domain.com/api/health/
```

### –®–∞–≥ 11.2: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã Frontend

1. –û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ: `https://your-domain.com`
2. –î–æ–ª–∂–Ω–∞ –∑–∞–≥—Ä—É–∑–∏—Ç—å—Å—è –≥–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12) –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –æ—à–∏–±–æ–∫

### –®–∞–≥ 11.3: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ PWA —Ñ—É–Ω–∫—Ü–∏–π

1. **–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ:**
   - –ù–∞ Android: Chrome ‚Üí –º–µ–Ω—é ‚Üí "–î–æ–±–∞–≤–∏—Ç—å –Ω–∞ –≥–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω"
   - –ù–∞ iOS: Safari ‚Üí –ü–æ–¥–µ–ª–∏—Ç—å—Å—è ‚Üí "–ù–∞ —ç–∫—Ä–∞–Ω ¬´–î–æ–º–æ–π¬ª"

2. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—Ñ—Ñ–ª–∞–π–Ω —Ä–µ–∂–∏–º–∞:**
   - –û—Ç–∫–ª—é—á–∏—Ç–µ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç
   - –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å (–µ—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω Service Worker)

3. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –º–∞–Ω–∏—Ñ–µ—Å—Ç–∞:**
   - –û—Ç–∫—Ä–æ–π—Ç–µ: `https://your-domain.com/manifest.json`
   - –î–æ–ª–∂–µ–Ω –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è JSON –º–∞–Ω–∏—Ñ–µ—Å—Ç

### –®–∞–≥ 11.4: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API

```bash
# –¢–µ—Å—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
curl -X POST https://your-domain.com/api/token/ \
  -H "Content-Type: application/json" \
  -d '{"phone": "+79991234567", "password": "your-password"}'

# –î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å access –∏ refresh —Ç–æ–∫–µ–Ω—ã
```

---

## 12. –ú–û–ù–ò–¢–û–†–ò–ù–ì –ò –û–ë–°–õ–£–ñ–ò–í–ê–ù–ò–ï

### –®–∞–≥ 12.1: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ Nginx
sudo tail -f /var/log/nginx/ringo-uchet-access.log
sudo tail -f /var/log/nginx/ringo-uchet-error.log

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ Docker
docker compose -f docker-compose.prod.yml logs -f django-api
docker compose -f docker-compose.prod.yml logs -f celery
```

### –®–∞–≥ 12.2: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –±—ç–∫–∞–ø–æ–≤

```bash
# –°–æ–∑–¥–∞–µ–º —Å–∫—Ä–∏–ø—Ç –±—ç–∫–∞–ø–∞
nano ~/backup-ringo.sh
```

**–°–æ–¥–µ—Ä–∂–∏–º–æ–µ —Å–∫—Ä–∏–ø—Ç–∞:**

```bash
#!/bin/bash
BACKUP_DIR="/var/backups/ringo-uchet"
DATE=$(date +%Y%m%d_%H%M%S)

mkdir -p $BACKUP_DIR

# –ë—ç–∫–∞–ø –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
docker compose -f ~/ringo-uchet/docker-compose.prod.yml exec -T db pg_dump -U ringo_user ringo_prod > $BACKUP_DIR/db_$DATE.sql

# –ë—ç–∫–∞–ø –º–µ–¥–∏–∞ —Ñ–∞–π–ª–æ–≤
tar -czf $BACKUP_DIR/media_$DATE.tar.gz /var/www/ringo-uchet/media/

# –£–¥–∞–ª—è–µ–º —Å—Ç–∞—Ä—ã–µ –±—ç–∫–∞–ø—ã (—Å—Ç–∞—Ä—à–µ 30 –¥–Ω–µ–π)
find $BACKUP_DIR -name "*.sql" -mtime +30 -delete
find $BACKUP_DIR -name "*.tar.gz" -mtime +30 -delete

echo "Backup completed: $DATE"
```

```bash
# –î–µ–ª–∞–µ–º —Å–∫—Ä–∏–ø—Ç –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–º
chmod +x ~/backup-ringo.sh

# –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º cron (–µ–∂–µ–¥–Ω–µ–≤–Ω–æ –≤ 2:00)
crontab -e
# –î–æ–±–∞–≤—å—Ç–µ:
0 2 * * * /home/ringo/backup-ringo.sh >> /var/log/ringo-backup.log 2>&1
```

### –®–∞–≥ 12.3: –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä–µ—Å—É—Ä—Å–æ–≤

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —É—Ç–∏–ª–∏—Ç –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
sudo apt install -y htop iotop nethogs

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –¥–∏—Å–∫–∞
df -h

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø–∞–º—è—Ç–∏
free -h

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
htop
```

### –®–∞–≥ 12.4: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

```bash
# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–¥–∞
cd ~/ringo-uchet
git pull origin main

# –ü–µ—Ä–µ—Å–±–æ—Ä–∫–∞ –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫
docker compose -f docker-compose.prod.yml down
docker compose -f docker-compose.prod.yml build --no-cache
docker compose -f docker-compose.prod.yml up -d

# –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π (–µ—Å–ª–∏ –µ—Å—Ç—å –Ω–æ–≤—ã–µ)
docker compose -f docker-compose.prod.yml exec django-api python manage.py migrate

# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ñ–∞–π–ª–æ–≤
docker compose -f docker-compose.prod.yml exec django-api python manage.py collectstatic --noinput
```

### –®–∞–≥ 12.5: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ Flutter Web –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

```bash
# –ù–∞ –ª–æ–∫–∞–ª—å–Ω–æ–º –∫–æ–º–ø—å—é—Ç–µ—Ä–µ
cd mobile
flutter clean
flutter pub get
flutter build web --release --base-href /

# –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä
scp -r build/web/* ringo@YOUR_SERVER_IP:/var/www/ringo-uchet/

# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∞–≤
sudo chown -R www-data:www-data /var/www/ringo-uchet
```

---

## ‚úÖ –ß–ï–ö–õ–ò–°–¢ –ì–û–¢–û–í–ù–û–°–¢–ò

–ü–µ—Ä–µ–¥ —Ç–µ–º –∫–∞–∫ —Å—á–∏—Ç–∞—Ç—å —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–º, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:

- [ ] –î–æ–º–µ–Ω –Ω–∞—Å—Ç—Ä–æ–µ–Ω –∏ —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ —Å–µ—Ä–≤–µ—Ä
- [ ] SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] Backend API –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ –∑–∞–ø—Ä–æ—Å—ã
- [ ] Frontend –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è
- [ ] PWA –º–∞–Ω–∏—Ñ–µ—Å—Ç –¥–æ—Å—Ç—É–ø–µ–Ω
- [ ] –ò–∫–æ–Ω–∫–∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- [ ] –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] API –∑–∞–ø—Ä–æ—Å—ã –ø—Ä–æ—Ö–æ–¥—è—Ç —á–µ—Ä–µ–∑ HTTPS
- [ ] –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è
- [ ] –ë—ç–∫–∞–ø—ã –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
- [ ] –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –Ω–∞—Å—Ç—Ä–æ–µ–Ω

---

## üÜò –†–ï–®–ï–ù–ò–ï –ü–†–û–ë–õ–ï–ú

### –ü—Ä–æ–±–ª–µ–º–∞: –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ Nginx: `sudo tail -f /var/log/nginx/ringo-uchet-error.log`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞: `sudo ls -la /var/www/ringo-uchet`
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é Nginx: `sudo nginx -t`

### –ü—Ä–æ–±–ª–µ–º–∞: API –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤: `docker compose -f docker-compose.prod.yml ps`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ Django: `docker compose -f docker-compose.prod.yml logs django-api`
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –ø–æ—Ä—Ç 8001 –æ—Ç–∫—Ä—ã—Ç: `netstat -tulpn | grep 8001`

### –ü—Ä–æ–±–ª–µ–º–∞: SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ DNS: `dig your-domain.com`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç: `sudo certbot certificates`
3. –û–±–Ω–æ–≤–∏—Ç–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç: `sudo certbot renew`

### –ü—Ä–æ–±–ª–µ–º–∞: PWA –Ω–µ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –º–∞–Ω–∏—Ñ–µ—Å—Ç: `https://your-domain.com/manifest.json`
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è HTTPS
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏–∫–æ–Ω–∫–∏: –æ–Ω–∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –¥–æ—Å—Ç—É–ø–Ω—ã –ø–æ —É–∫–∞–∑–∞–Ω–Ω—ã–º –ø—É—Ç—è–º

---

## üìû –ü–û–î–î–ï–†–ñ–ö–ê

–ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ (—Å–º. —Ä–∞–∑–¥–µ–ª 12.1)
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–æ–≤: `docker compose -f docker-compose.prod.yml ps`
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é: `sudo nginx -t`
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–∞–π—Ä–≤–æ–ª: `sudo ufw status`

---

**–£—Å–ø–µ—à–Ω–æ–≥–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è! üöÄ**

