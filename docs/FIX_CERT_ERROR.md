# üîß –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï: ERR_CERT_COMMON_NAME_INVALID

## ‚ùå –ü–†–û–ë–õ–ï–ú–ê
–ë—Ä–∞—É–∑–µ—Ä –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –æ—à–∏–±–∫—É `ERR_CERT_COMMON_NAME_INVALID` –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ `http://–í–ê–®_IP`

## üîç –ü–†–ò–ß–ò–ù–ê
–ë—Ä–∞—É–∑–µ—Ä –ø—ã—Ç–∞–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å HTTPS, —Ö–æ—Ç—è —É –Ω–∞—Å –Ω–∞—Å—Ç—Ä–æ–µ–Ω —Ç–æ–ª—å–∫–æ HTTP. –≠—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –∏–∑-–∑–∞:
1. –ë—Ä–∞—É–∑–µ—Ä –∫—ç—à–∏—Ä–æ–≤–∞–ª HTTPS —Ä–µ–¥–∏—Ä–µ–∫—Ç
2. Django –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ HTTPS

---

## ‚úÖ –†–ï–®–ï–ù–ò–ï 1: –ü—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ curl (–±–µ–∑ –±—Ä–∞—É–∑–µ—Ä–∞)

**–ù–∞ —Å–µ—Ä–≤–µ—Ä–µ:**

```bash
curl http://127.0.0.1/
```

**–ò–ª–∏ —Å –≤–∞—à–µ–≥–æ –∫–æ–º–ø—å—é—Ç–µ—Ä–∞:**

```bash
curl http://–í–ê–®_IP/
```

**–î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å HTML –∫–æ–¥ —Å—Ç—Ä–∞–Ω–∏—Ü—ã.**

---

## ‚úÖ –†–ï–®–ï–ù–ò–ï 2: –û—á–∏—Å—Ç–∫–∞ –∫—ç—à–∞ –±—Ä–∞—É–∑–µ—Ä–∞

**–í –±—Ä–∞—É–∑–µ—Ä–µ:**
1. –ù–∞–∂–º–∏—Ç–µ `Ctrl + Shift + Delete`
2. –í—ã–±–µ—Ä–∏—Ç–µ "–ö—ç—à" –∏–ª–∏ "Cached images and files"
3. –û—á–∏—Å—Ç–∏—Ç–µ
4. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –æ—Ç–∫—Ä—ã—Ç—å —Å–Ω–æ–≤–∞ `http://–í–ê–®_IP`

**–ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ä–µ–∂–∏–º –∏–Ω–∫–æ–≥–Ω–∏—Ç–æ:**
- `Ctrl + Shift + N` (Chrome)
- `Ctrl + Shift + P` (Firefox)
- –û—Ç–∫—Ä–æ–π—Ç–µ `http://–í–ê–®_IP`

---

## ‚úÖ –†–ï–®–ï–ù–ò–ï 3: –í—Ä–µ–º–µ–Ω–Ω–æ–µ –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ HTTPS —Ä–µ–¥–∏—Ä–µ–∫—Ç–∞ –≤ Django

**–ü—Ä–æ–±–ª–µ–º–∞:** Django production –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ä–µ–¥–∏—Ä–µ–∫—Ç—è—Ç –Ω–∞ HTTPS, –Ω–æ SSL –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω.

**–†–µ—à–µ–Ω–∏–µ - –≤—Ä–µ–º–µ–Ω–Ω–æ –æ—Ç–∫–ª—é—á–∏—Ç—å —Ä–µ–¥–∏—Ä–µ–∫—Ç:**

```bash
cd ~/ringo-uchet/backend
nano .env
```

**–î–æ–±–∞–≤—å—Ç–µ —Å—Ç—Ä–æ–∫—É:**

```env
DJANGO_SECURE_SSL_REDIRECT=False
```

**–ó–∞—Ç–µ–º –≤ prod.py –Ω—É–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å, –∏–ª–∏ —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è:**

**–ò–ª–∏ –∏–∑–º–µ–Ω–∏—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –Ω–∞–ø—Ä—è–º—É—é:**

```bash
docker compose -f docker-compose.prod.yml exec api python manage.py shell
```

**–í Python shell:**

```python
from django.conf import settings
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–µ–∫—É—â—É—é –Ω–∞—Å—Ç—Ä–æ–π–∫—É
print(settings.SECURE_SSL_REDIRECT)
exit()
```

**–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ API:**

```bash
docker compose -f docker-compose.prod.yml restart api
```

---

## ‚úÖ –†–ï–®–ï–ù–ò–ï 4: –ü—Ä–æ–≤–µ—Ä–∫–∞ Nginx –Ω–∞–ø—Ä—è–º—É—é

**–ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ Nginx –æ—Ç–¥–∞–µ—Ç —Ñ–∞–π–ª—ã:**

```bash
curl -I http://127.0.0.1/
```

**–î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å `200 OK`, –∞ –Ω–µ `301` –∏–ª–∏ `302`.**

---

## ‚úÖ –ë–´–°–¢–†–ê–Ø –ü–†–û–í–ï–†–ö–ê

**–í—ã–ø–æ–ª–Ω–∏—Ç–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:**

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ Nginx
curl http://127.0.0.1/ | head -20

# –ü—Ä–æ–≤–µ—Ä–∫–∞ API
curl -I http://127.0.0.1/api/health/

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤ Nginx
sudo tail -20 /var/log/nginx/ringo-uchet-access.log
```

---

## üí° –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–Ø

**–°–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —á–µ—Ä–µ–∑ curl** - –µ—Å–ª–∏ curl —Ä–∞–±–æ—Ç–∞–µ—Ç, –∑–Ω–∞—á–∏—Ç –ø—Ä–æ–±–ª–µ–º–∞ –≤ –±—Ä–∞—É–∑–µ—Ä–µ (–∫—ç—à –∏–ª–∏ HSTS).

**–ï—Å–ª–∏ curl —Ç–æ–∂–µ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç** - –ø—Ä–æ–±–ª–µ–º–∞ –≤ Nginx –∏–ª–∏ Django —Ä–µ–¥–∏—Ä–µ–∫—Ç–µ.

