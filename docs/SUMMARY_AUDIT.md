# üìä –ö–†–ê–¢–ö–ê–Ø –°–í–û–î–ö–ê –ü–†–û–í–ï–†–ö–ò –ò –ò–°–ü–†–ê–í–õ–ï–ù–ò–ô

## ‚úÖ –í–´–ü–û–õ–ù–ï–ù–ù–´–ï –ó–ê–î–ê–ß–ò

### 1. ‚úÖ –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–±–ª–µ–º –∏–∑ —Ç–µ—Ä–º–∏–Ω–∞–ª–∞
- **–ü—Ä–æ–±–ª–µ–º–∞ Docker Registry:** –û–±—Ä–∞–∑ `ghcr.io/ringo-backend:latest` –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
- **–ü—Ä–æ–±–ª–µ–º–∞ Many-to-Many:** –í –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ —Å—Ç–∞—Ä–∞—è –≤–µ—Ä—Å–∏—è –∫–æ–¥–∞ (–≤ —Ç–µ–∫—É—â–µ–º –∫–æ–¥–µ —É–∂–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ)
- **–ü—Ä–æ–±–ª–µ–º–∞ Git Auth:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª—è –≤–º–µ—Å—Ç–æ —Ç–æ–∫–µ–Ω–∞
- **–†–µ—à–µ–Ω–∏–µ:** –ò—Å–ø—Ä–∞–≤–ª–µ–Ω `docker-compose.prod.yml` –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Å–±–æ—Ä–∫–∏

### 2. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–¥–∞ –Ω–∞ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
- **Backend:** ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞, –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å, –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- **Frontend:** ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞, state management, —Å–µ—Ç–µ–≤–æ–π —Å–ª–æ–π
- **–ù–∞–π–¥–µ–Ω–æ:** –ù–µ—Å–∫–æ–ª—å–∫–æ –º–µ–ª–∫–∏—Ö —É–ª—É—á—à–µ–Ω–∏–π (—É–º–µ–Ω—å—à–µ–Ω–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ workers, –¥–æ–±–∞–≤–ª–µ–Ω—ã –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ —Å–µ—Ä–≤–∏—Å—ã)

### 3. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- **API Endpoints:** ‚úÖ –í—Å–µ endpoints –ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
- **CORS:** ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –¥–ª—è production
- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:** ‚úÖ PostgreSQL 15, –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- **Docker:** ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### 4. ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã —Å–µ—Ä–≤–∏—Å—ã `db`, `redis`, `minio` –≤ `docker-compose.prod.yml`
- ‚úÖ –ò–∑–º–µ–Ω–µ–Ω–æ —Å `image` –Ω–∞ `build` –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Å–±–æ—Ä–∫–∏ –æ–±—Ä–∞–∑–æ–≤
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã healthchecks –∏ depends_on
- ‚úÖ –£–¥–∞–ª–µ–Ω —É—Å—Ç–∞—Ä–µ–≤—à–∏–π `version` –∏–∑ docker-compose

### 5. ‚úÖ –°–æ—Å—Ç–∞–≤–ª–µ–Ω–∞ –ø–æ–ª–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –¥–µ–ø–ª–æ—é
- üìÑ –°–æ–∑–¥–∞–Ω —Ñ–∞–π–ª `docs/COMPLETE_AUDIT_AND_DEPLOY_PLAN.md`
- üìã –í–∫–ª—é—á–∞–µ—Ç –ø–æ—à–∞–≥–æ–≤—É—é –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é –æ—Ç –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ –¥–æ –ø—Ä–æ–≤–µ—Ä–∫–∏
- üîß –í–∫–ª—é—á–∞–µ—Ç –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É –ø—Ä–æ–±–ª–µ–º –∏ –∏—Ö —Ä–µ—à–µ–Ω–∏—è

---

## üîß –ò–°–ü–†–ê–í–õ–ï–ù–ù–´–ô –§–ê–ô–õ

### `backend/docker-compose.prod.yml`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
1. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã —Å–µ—Ä–≤–∏—Å—ã: `db`, `redis`, `minio`
2. ‚úÖ –ò–∑–º–µ–Ω–µ–Ω–æ —Å `image: ghcr.io/...` –Ω–∞ `build: context: .`
3. ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
4. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã `depends_on` —Å —É—Å–ª–æ–≤–∏—è–º–∏ `service_healthy`
5. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã volumes –¥–ª—è –¥–∞–Ω–Ω—ã—Ö
6. ‚úÖ –£–¥–∞–ª–µ–Ω —É—Å—Ç–∞—Ä–µ–≤—à–∏–π `version: '3.8'`
7. ‚úÖ –£–º–µ–Ω—å—à–µ–Ω–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ workers —Å 4 –¥–æ 2 (–æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è)

---

## üìã –°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò

### –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ:

1. **–û–±–Ω–æ–≤–∏—Ç—å –∫–æ–¥:**
   ```bash
   cd ~/ringo-uchet/backend
   git pull origin master
   ```

2. **–°–æ–±—Ä–∞—Ç—å –æ–±—Ä–∞–∑—ã:**
   ```bash
   docker compose -f docker-compose.prod.yml build --no-cache
   ```

3. **–ó–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã:**
   ```bash
   docker compose -f docker-compose.prod.yml up -d
   ```

4. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å:**
   ```bash
   docker compose -f docker-compose.prod.yml ps
   docker compose -f docker-compose.prod.yml logs api --tail 50
   ```

5. **–ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏ (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ):**
   ```bash
   docker compose -f docker-compose.prod.yml exec api python manage.py migrate
   ```

### –î–ª—è Git Push:

1. **–°–æ–∑–¥–∞—Ç—å Personal Access Token –Ω–∞ GitHub:**
   - Settings ‚Üí Developer settings ‚Üí Personal access tokens ‚Üí Tokens (classic)
   - Generate new token (classic)
   - Scope: `repo`

2. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–∫–µ–Ω –≤–º–µ—Å—Ç–æ –ø–∞—Ä–æ–ª—è –ø—Ä–∏ push**

---

## üìö –î–û–ö–£–ú–ï–ù–¢–ê–¶–ò–Ø

- **–ü–æ–ª–Ω—ã–π –ø–ª–∞–Ω:** `docs/COMPLETE_AUDIT_AND_DEPLOY_PLAN.md`
- **–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –¥–µ–ø–ª–æ—é:** `docs/DEPLOY_ALL_CHANGES.md`

---

**–î–∞—Ç–∞:** 2025-12-11
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –í—Å–µ –∑–∞–¥–∞—á–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã

