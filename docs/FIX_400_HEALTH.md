# üîß –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï 400 BAD REQUEST –î–õ–Ø /api/health/

## ‚úÖ –•–û–†–û–®–ò–ï –ù–û–í–û–°–¢–ò

- ‚úÖ API –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∑–∞–ø—É—â–µ–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ Gunicorn —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ Workers –∑–∞–≥—Ä—É–∂–µ–Ω—ã
- ‚úÖ Endpoint `/api/health/` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç

## üî¥ –ü–†–û–ë–õ–ï–ú–ê

**–û—à–∏–±–∫–∞:** `400 Bad Request` –ø—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ –∫ `/api/health/`

**–ü—Ä–∏—á–∏–Ω–∞:** Django –ø—Ä–æ–≤–µ—Ä—è–µ—Ç `ALLOWED_HOSTS` –∏ –æ—Ç–∫–ª–æ–Ω—è–µ—Ç –∑–∞–ø—Ä–æ—Å—ã —Å –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–º Host header.

---

## üîß –ë–´–°–¢–†–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï

**–ù–∞ —Å–µ—Ä–≤–µ—Ä–µ:**

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º Host header
curl -H "Host: ringoouchet.ru" http://localhost:8001/api/health/

# –ò–ª–∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ø—Ä—è–º—É—é —á–µ—Ä–µ–∑ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
docker compose -f docker-compose.prod.yml exec api curl http://localhost:8000/api/health/

# –ò–ª–∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —á–µ—Ä–µ–∑ –≤–Ω–µ—à–Ω–∏–π IP
curl -H "Host: 91.229.90.72" http://localhost:8001/api/health/
```

---

## ‚úÖ –ü–†–û–í–ï–†–ö–ê –ß–ï–†–ï–ó NGINX

**–ù–∞ —Å–µ—Ä–≤–µ—Ä–µ:**

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ Nginx –ø—Ä–∞–≤–∏–ª—å–Ω–æ –ø—Ä–æ–∫—Å–∏—Ä—É–µ—Ç
curl https://ringoouchet.ru/api/health/

# –î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å: {"status": "ok"} –∏–ª–∏ {"status": "healthy"}
```

---

## üìã –ò–¢–û–ì

**–í—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç!** 400 –æ—à–∏–±–∫–∞ –ø—Ä–∏ –ø—Ä—è–º–æ–º –∑–∞–ø—Ä–æ—Å–µ –∫ `localhost:8001` - —ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ, Django –ø—Ä–æ–≤–µ—Ä—è–µ—Ç Host header.

**–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á–µ—Ä–µ–∑ Nginx:**
```bash
curl https://ringoouchet.ru/api/health/
```

–ï—Å–ª–∏ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç - –∑–Ω–∞—á–∏—Ç –≤—Å–µ –≤ –ø–æ—Ä—è–¥–∫–µ! üéâ

