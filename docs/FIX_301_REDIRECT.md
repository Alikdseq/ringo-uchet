# üîß –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï: API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 301 —Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ HTTPS

## ‚úÖ –•–û–†–û–®–ò–ï –ù–û–í–û–°–¢–ò
- API —Ä–∞–±–æ—Ç–∞–µ—Ç! ‚úÖ
- Gunicorn –∑–∞–ø—É—â–µ–Ω ‚úÖ
- –ü–æ—Ä—Ç 8001 —Å–ª—É—à–∞–µ—Ç—Å—è ‚úÖ
- API –æ—Ç–≤–µ—á–∞–µ—Ç ‚úÖ

## ‚ö†Ô∏è –ü–†–û–ë–õ–ï–ú–ê
API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç HTTP 301 (—Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ HTTPS), –ø–æ—Ç–æ–º—É —á—Ç–æ –≤ production –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö Django –≤–∫–ª—é—á–µ–Ω `SECURE_SSL_REDIRECT=True`.

---

## ‚úÖ –†–ï–®–ï–ù–ò–ï 1: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å API —Å —Ñ–ª–∞–≥–æ–º follow redirects

```bash
curl -L http://127.0.0.1:8001/api/health/
```

–§–ª–∞–≥ `-L` –∑–∞—Å—Ç–∞–≤–∏—Ç curl —Å–ª–µ–¥–æ–≤–∞—Ç—å —Ä–µ–¥–∏—Ä–µ–∫—Ç–∞–º.

---

## ‚úÖ –†–ï–®–ï–ù–ò–ï 2: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ø—Ä—è–º—É—é —á–µ—Ä–µ–∑ HTTPS (–µ—Å–ª–∏ SSL –Ω–∞—Å—Ç—Ä–æ–µ–Ω)

```bash
curl -k https://127.0.0.1:8001/api/health/
```

–§–ª–∞–≥ `-k` –æ—Ç–∫–ª—é—á–∞–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫—É SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞ (–¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏).

---

## ‚úÖ –†–ï–®–ï–ù–ò–ï 3: –í—Ä–µ–º–µ–Ω–Ω–æ –æ—Ç–∫–ª—é—á–∏—Ç—å SECURE_SSL_REDIRECT (–¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –±–µ–∑ SSL, –º–æ–∂–Ω–æ –≤—Ä–µ–º–µ–Ω–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:

```bash
cd ~/ringo-uchet/backend
nano .env
```

**–î–æ–±–∞–≤—å—Ç–µ:**
```env
DJANGO_SECURE_SSL_REDIRECT=False
```

**–ó–∞—Ç–µ–º –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ API:**
```bash
docker compose -f docker-compose.prod.yml restart api
```

---

## üí° –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–Ø

**–î–ª—è production —ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ!** Django –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–µ–¥–∏—Ä–µ–∫—Ç–∏—Ç –Ω–∞ HTTPS –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏.

**–ù–æ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ:**
```bash
curl -L http://127.0.0.1:8001/api/health/
```

**–ò–ª–∏ –ø—Ä–æ—Å—Ç–æ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –æ—Ç–≤–µ—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç `301` –∏ `gunicorn` - —ç—Ç–æ –∑–Ω–∞—á–∏—Ç API —Ä–∞–±–æ—Ç–∞–µ—Ç!**

---

## ‚úÖ –í–´–í–û–î

**API –†–ê–ë–û–¢–ê–ï–¢!** –†–µ–¥–∏—Ä–µ–∫—Ç 301 - —ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –¥–ª—è production.

**–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å —Ñ–ª–∞–≥–æ–º -L:**
```bash
curl -L http://127.0.0.1:8001/api/health/
```

