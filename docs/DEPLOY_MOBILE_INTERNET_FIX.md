# üöÄ –î–ï–ü–õ–û–ô: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º –Ω–∞ –º–æ–±–∏–ª—å–Ω–æ–º –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–µ

## ‚úÖ –ß–¢–û –ò–°–ü–†–ê–í–õ–ï–ù–û

1. **Service Worker** - –¥–æ–±–∞–≤–ª–µ–Ω—ã —Ç–∞–π–º–∞—É—Ç—ã –∏ retry –¥–ª—è –º–æ–±–∏–ª—å–Ω–æ–≥–æ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞
2. **RetryInterceptor** - —É–ª—É—á—à–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —Å–µ—Ç–∏
3. **Dio Client** - –æ–±–Ω–æ–≤–ª–µ–Ω –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç—ã retry

---

## üìã –®–ê–ì–ò –î–ï–ü–õ–û–Ø

### 1. –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å Flutter Web

```powershell
cd C:\ringo-uchet\mobile
flutter build web --release --base-href /
```

### 2. –ó–∞–≥—Ä—É–∑–∏—Ç—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä

**–í–∞—Ä–∏–∞–Ω—Ç A: –ß–µ—Ä–µ–∑ –∞—Ä—Ö–∏–≤**

```powershell
# –ù–∞ –ª–æ–∫–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–µ
cd C:\ringo-uchet\mobile\build\web
Compress-Archive -Path * -DestinationPath ..\..\..\build.zip -Force
```

–ó–∞—Ç–µ–º –∑–∞–≥—Ä—É–∑–∏—Ç–µ `build.zip` –Ω–∞ —Å–µ—Ä–≤–µ—Ä –∏ —Ä–∞—Å–ø–∞–∫—É–π—Ç–µ:

```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ
cd /var/www/ringo-uchet
unzip -o build.zip
```

**–í–∞—Ä–∏–∞–Ω—Ç B: –ß–µ—Ä–µ–∑ scp/sftp**

```bash
# –° –ª–æ–∫–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω—ã (–µ—Å–ª–∏ –µ—Å—Ç—å –¥–æ—Å—Ç—É–ø)
scp -r C:\ringo-uchet\mobile\build\web/* root@91.229.90.72:/var/www/ringo-uchet/
```

### 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ñ–∞–π–ª—ã –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ
cd /var/www/ringo-uchet
ls -la service-worker.js
cat service-worker.js | head -5  # –î–æ–ª–∂–Ω–æ –±—ã—Ç—å v2
```

### 4. –û—á–∏—Å—Ç–∏—Ç—å –∫—ç—à –±—Ä–∞—É–∑–µ—Ä–∞

**–í–∞–∂–Ω–æ:** –ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è –Ω—É–∂–Ω–æ –æ—á–∏—Å—Ç–∏—Ç—å –∫—ç—à:

**Chrome/Edge:**
- `F12` ‚Üí **Application** ‚Üí **Service Workers** ‚Üí **Unregister**
- `F12` ‚Üí **Application** ‚Üí **Clear storage** ‚Üí **Clear site data**

**Safari (iOS):**
- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí Safari ‚Üí –û—á–∏—Å—Ç–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é –∏ –¥–∞–Ω–Ω—ã–µ
- –ò–ª–∏: –î–æ–ª–≥–æ–µ –Ω–∞–∂–∞—Ç–∏–µ –Ω–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ ‚Üí –û—á–∏—Å—Ç–∏—Ç—å –∫—ç—à

**Yandex Browser:**
- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí –ö–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å ‚Üí –û—á–∏—Å—Ç–∏—Ç—å –¥–∞–Ω–Ω—ã–µ ‚Üí –ö—ç—à + –°–µ—Ä–≤–∏—Å–Ω—ã–µ –≤–æ—Ä–∫–µ—Ä—ã

---

## ‚úÖ –ü–†–û–í–ï–†–ö–ê

1. –û—Ç–∫—Ä–æ–π—Ç–µ `https://ringoouchet.ru` –Ω–∞ –º–æ–±–∏–ª—å–Ω–æ–º –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–µ
2. `F12` ‚Üí **Application** ‚Üí **Service Workers**
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω **v2**
4. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –≤–æ–π—Ç–∏
5. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:

```bash
cd /root/ringo-uchet/backend
docker compose -f docker-compose.prod.yml logs -f api
```

**–î–æ–ª–∂–Ω—ã –ø–æ—è–≤–∏—Ç—å—Å—è –ª–æ–≥–∏ `Token obtain attempt`**

---

## üîß –ï–°–õ–ò –ù–ï –†–ê–ë–û–¢–ê–ï–¢

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ `service-worker.js` –æ–±–Ω–æ–≤–ª–µ–Ω –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ (–¥–æ–ª–∂–Ω–æ –±—ã—Ç—å v2)
2. –û—á–∏—Å—Ç–∏—Ç–µ –∫—ç—à –±—Ä–∞—É–∑–µ—Ä–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ Service Worker –≤ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞ (`F12` ‚Üí **Console**)
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –∑–∞–ø—Ä–æ—Å—ã –∏–¥—É—Ç –≤ Network tab (`F12` ‚Üí **Network**)

---

**–ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É –Ω–∞ –º–æ–±–∏–ª—å–Ω–æ–º –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–µ!**

