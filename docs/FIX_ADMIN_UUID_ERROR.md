# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–∫–∏ UUID –≤ –∞–¥–º–∏–Ω–∫–µ Django

## –ü—Ä–æ–±–ª–µ–º–∞

–ü—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ `/admin/` –ø–æ—è–≤–ª—è–µ—Ç—Å—è –æ—à–∏–±–∫–∞:
```
['–ó–Ω–∞—á–µ–Ω–∏–µ ¬´1¬ª –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –≤–µ—Ä–Ω—ã–º UUID-–æ–º.']
```

## –ü—Ä–∏—á–∏–Ω–∞

Django Admin –ø—ã—Ç–∞–µ—Ç—Å—è –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä "1" –∫–∞–∫ UUID –¥–ª—è –º–æ–¥–µ–ª–∏ `Order`, –∫–æ—Ç–æ—Ä–∞—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç UUID –≤ –∫–∞—á–µ—Å—Ç–≤–µ primary key.

## –†–µ—à–µ–Ω–∏–µ

### –í–∞—Ä–∏–∞–Ω—Ç 1: –û—á–∏—Å—Ç–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ URL (–±—ã—Å—Ç—Ä–æ–µ —Ä–µ—à–µ–Ω–∏–µ)

1. **–û—á–∏—Å—Ç–∏—Ç–µ URL** - —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤ –∞–¥—Ä–µ—Å–Ω–æ–π —Å—Ç—Ä–æ–∫–µ –Ω–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ —Ç–∏–ø–∞ `?id=1`:
   - –ü—Ä–∞–≤–∏–ª—å–Ω–æ: `http://localhost:8000/admin/`
   - –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ: `http://localhost:8000/admin/?id=1`

2. **–û—á–∏—Å—Ç–∏—Ç–µ cookies –∏ —Å–µ—Å—Å–∏—é**:
   - –û—Ç–∫—Ä–æ–π—Ç–µ DevTools (F12)
   - Application ‚Üí Cookies ‚Üí —É–¥–∞–ª–∏—Ç–µ –≤—Å–µ cookies –¥–ª—è `localhost:8000`
   - Application ‚Üí Session Storage ‚Üí –æ—á–∏—Å—Ç–∏—Ç–µ

3. **–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –æ—Ç–∫—Ä—ã—Ç—å –∞–¥–º–∏–Ω–∫—É –≤ —Ä–µ–∂–∏–º–µ –∏–Ω–∫–æ–≥–Ω–∏—Ç–æ**

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–Ω–Ω—ã—Ö –≤ –±–∞–∑–µ (–µ—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ –æ—Å—Ç–∞—ë—Ç—Å—è)

–í—ã–ø–æ–ª–Ω–∏—Ç–µ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É:

```bash
docker compose exec django-api python check_admin_issue.py
```

–≠—Ç–æ –ø–æ–∫–∞–∂–µ—Ç:
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø–∏—Å–µ–π –≤ –±–∞–∑–µ
- –¢–∏–ø—ã ID (UUID –∏–ª–∏ integer)
- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –∞–¥–º–∏–Ω–∫–∏

### –í–∞—Ä–∏–∞–Ω—Ç 3: –û—á–∏—Å—Ç–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (–µ—Å–ª–∏ –µ—Å—Ç—å —Å—Ç–∞—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ)

–ï—Å–ª–∏ –≤ –±–∞–∑–µ –µ—Å—Ç—å –∑–∞–ø–∏—Å–∏ —Å integer ID:

```bash
# –í–æ–π–¥–∏—Ç–µ –≤ shell
docker compose exec django-api python manage.py shell
```

```python
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∑–∞–ø–∏—Å–∏
from orders.models import Order
from finance.models import Invoice

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, –µ—Å—Ç—å –ª–∏ –∑–∞–ø–∏—Å–∏
print(f"Orders: {Order.objects.count()}")
print(f"Invoices: {Invoice.objects.count()}")

# –ï—Å–ª–∏ –µ—Å—Ç—å –∑–∞–ø–∏—Å–∏ —Å –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ ID, —É–¥–∞–ª–∏—Ç–µ –∏—Ö
# Order.objects.all().delete()  # ‚ö†Ô∏è –û—Å—Ç–æ—Ä–æ–∂–Ω–æ! –£–¥–∞–ª–∏—Ç –≤—Å–µ –∑–∞–∫–∞–∑—ã
# Invoice.objects.all().delete()  # ‚ö†Ô∏è –û—Å—Ç–æ—Ä–æ–∂–Ω–æ! –£–¥–∞–ª–∏—Ç –≤—Å–µ —Å—á–µ—Ç–∞

exit()
```

### –í–∞—Ä–∏–∞–Ω—Ç 4: –ü–µ—Ä–µ—Å–æ–∑–¥–∞–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (—Ä–∞–¥–∏–∫–∞–ª—å–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ)

–ï—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ –ø–æ–º–æ–≥–∞–µ—Ç:

```bash
# ‚ö†Ô∏è –í–ù–ò–ú–ê–ù–ò–ï: –≠—Ç–æ —É–¥–∞–ª–∏—Ç –í–°–ï –¥–∞–Ω–Ω—ã–µ!

# 1. –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
docker compose down

# 2. –£–¥–∞–ª–∏—Ç–µ volumes (–±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö)
docker compose down -v

# 3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –∑–∞–Ω–æ–≤–æ
docker compose up -d

# 4. –ü–æ–¥–æ–∂–¥–∏—Ç–µ 10 —Å–µ–∫—É–Ω–¥
Start-Sleep -Seconds 10

# 5. –ü—Ä–∏–º–µ–Ω–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏
docker compose exec django-api python manage.py migrate

# 6. –°–æ–∑–¥–∞–π—Ç–µ —Å—É–ø–µ—Ä–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
docker compose exec django-api python manage.py shell
```

–í Python shell:
```python
from users.models import User
User.objects.create_superuser(
    phone='+79991234567',
    email='admin@ringo.local',
    password='admin123',
    role='admin'
)
exit()
```

## –ü—Ä–æ—Ñ–∏–ª–∞–∫—Ç–∏–∫–∞

–ß—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å —ç—Ç–æ–π –ø—Ä–æ–±–ª–µ–º—ã –≤ –±—É–¥—É—â–µ–º:

1. **–í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ UUID –¥–ª—è –º–æ–¥–µ–ª–µ–π —Å UUID primary key**:
   ```python
   # –ü—Ä–∞–≤–∏–ª—å–Ω–æ
   order = Order.objects.get(id=uuid.UUID('...'))
   
   # –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ
   order = Order.objects.get(id=1)  # ‚ùå
   ```

2. **–ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã URL** –ø–µ—Ä–µ–¥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –≤ –∞–¥–º–∏–Ω–∫–µ

3. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ —Ç–∏–ø—ã** –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Å–≤—è–∑–∞–Ω–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤

## –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

–ü–æ—Å–ª–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è —Ä–µ—à–µ–Ω–∏—è:

1. –û—Ç–∫—Ä–æ–π—Ç–µ –∞–¥–º–∏–Ω–∫—É: http://localhost:8000/admin/
2. –î–æ–ª–∂–Ω–∞ –æ—Ç–∫—Ä—ã—Ç—å—Å—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –≤—Ö–æ–¥–∞ (–µ—Å–ª–∏ –Ω–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω—ã) –∏–ª–∏ –≥–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –∞–¥–º–∏–Ω–∫–∏
3. –ù–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –æ—à–∏–±–æ–∫ –≤ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞ (F12)

## –ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ –æ—Å—Ç–∞—ë—Ç—Å—è

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ Django:
   ```bash
   docker compose logs django-api | tail -50
   ```

2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –±—Ä–∞—É–∑–µ—Ä–∞ (F12 ‚Üí Console)

3. –í—ã–ø–æ–ª–Ω–∏—Ç–µ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É:
   ```bash
   docker compose exec django-api python check_admin_issue.py
   ```

4. –°–æ–∑–¥–∞–π—Ç–µ issue —Å –ø–æ–ª–Ω—ã–º –ª–æ–≥–æ–º –æ—à–∏–±–∫–∏

