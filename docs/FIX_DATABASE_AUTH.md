# üîß –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï: –û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö

## ‚ùå –ü–†–û–ë–õ–ï–ú–ê

**–û—à–∏–±–∫–∞:** `password authentication failed for user "ringo_user"`

**–°—Ç–∞—Ç—É—Å:** API —Ä–∞–±–æ—Ç–∞–µ—Ç, –Ω–æ –ë–î –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞ - –ø–æ—ç—Ç–æ–º—É –ª–æ–≥–∏–Ω –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç!

---

## ‚úÖ –†–ï–®–ï–ù–ò–ï

### –®–ê–ì 1: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–∞—Ä–æ–ª—å –ë–î –≤ .env

```bash
cd /root/ringo-uchet/backend
grep -E "POSTGRES|DB_" .env | grep -v "^#"
```

**–ü—Ä–∏—à–ª–∏—Ç–µ –≤—ã–≤–æ–¥ (—Å–∫—Ä–æ–π—Ç–µ –ø–∞—Ä–æ–ª—å –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏)!**

---

### –®–ê–ì 2: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–∞—Ä–æ–ª—å –≤ docker-compose.prod.yml

```bash
grep -A 5 "POSTGRES_" docker-compose.prod.yml | head -10
```

**–ü—Ä–∏—à–ª–∏—Ç–µ –≤—ã–≤–æ–¥!**

---

### –®–ê–ì 3: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –ë–î –∑–∞–ø—É—â–µ–Ω–∞

```bash
docker compose -f docker-compose.prod.yml exec db psql -U postgres -c "\l"
```

**–ï—Å–ª–∏ –æ—à–∏–±–∫–∞ - –ë–î –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ.**

---

### –®–ê–ì 4: –ò—Å–ø—Ä–∞–≤–∏—Ç—å –ø–∞—Ä–æ–ª—å –ë–î

**–í–∞—Ä–∏–∞–Ω—Ç 1: –ï—Å–ª–∏ –ø–∞—Ä–æ–ª–∏ –Ω–µ —Å–æ–≤–ø–∞–¥–∞—é—Ç - –æ–±–Ω–æ–≤–∏—Ç—å .env –∏ –ø–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å –ë–î**

```bash
# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
docker compose -f docker-compose.prod.yml down

# –£–¥–∞–ª–∏—Ç—å —Ç–æ–º –ë–î (–û–°–¢–û–†–û–ñ–ù–û - —É–¥–∞–ª–∏—Ç –≤—Å–µ –¥–∞–Ω–Ω—ã–µ!)
docker volume ls | grep postgres
docker volume rm backend_postgres_data  # –ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ —Ä–µ–∞–ª—å–Ω–æ–µ –∏–º—è

# –û–±–Ω–æ–≤–∏—Ç—å .env —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º –ø–∞—Ä–æ–ª–µ–º
nano .env
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ:
# POSTGRES_USER=ringo_user
# POSTGRES_PASSWORD=–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π_–ø–∞—Ä–æ–ª—å
# POSTGRES_DB=ringo_db

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –∑–∞–Ω–æ–≤–æ
docker compose -f docker-compose.prod.yml up -d
```

**–í–∞—Ä–∏–∞–Ω—Ç 2: –ï—Å–ª–∏ –Ω—É–∂–Ω–æ –ø—Ä–æ—Å—Ç–æ –æ–±–Ω–æ–≤–∏—Ç—å –ø–∞—Ä–æ–ª—å –≤ –ë–î**

```bash
docker compose -f docker-compose.prod.yml exec db psql -U postgres -c "ALTER USER ringo_user WITH PASSWORD '–Ω–æ–≤—ã–π_–ø–∞—Ä–æ–ª—å';"
```

---

### –®–ê–ì 5: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

```bash
curl -k https://ringoouchet.ru/api/health/
```

**–î–æ–ª–∂–Ω–æ –±—ã—Ç—å:** `"database": {"status": "healthy"}`

---

**–°–Ω–∞—á–∞–ª–∞ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –®–ê–ì–ò 1-3 –∏ –ø—Ä–∏—à–ª–∏—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã!**

