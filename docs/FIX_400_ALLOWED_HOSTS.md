# üîß –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï: 400 Bad Request - –¥–æ–º–µ–Ω –Ω–µ –≤ ALLOWED_HOSTS

## ‚ùå –ü–†–û–ë–õ–ï–ú–ê

`curl http://ringoouchet.ru/api/health/` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç:
```
Bad Request (400)
```

## üîç –ü–†–ò–ß–ò–ù–ê

Django –Ω–µ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –¥–æ–º–µ–Ω `ringoouchet.ru`, –ø–æ—Ç–æ–º—É —á—Ç–æ –æ–Ω –Ω–µ –¥–æ–±–∞–≤–ª–µ–Ω –≤ `DJANGO_ALLOWED_HOSTS`.

---

## ‚úÖ –†–ï–®–ï–ù–ò–ï

### –®–ê–ì 1: –û–±–Ω–æ–≤–∏—Ç—å .env —Ñ–∞–π–ª

```bash
cd ~/ringo-uchet/backend
nano .env
```

**–ù–∞–π–¥–∏—Ç–µ —Å—Ç—Ä–æ–∫—É —Å `DJANGO_ALLOWED_HOSTS` –∏–ª–∏ `ALLOWED_HOSTS`**

**–ï—Å–ª–∏ –µ—Å—Ç—å:**
```env
DJANGO_ALLOWED_HOSTS=91.229.90.72
```

**–ò–∑–º–µ–Ω–∏—Ç–µ –Ω–∞:**
```env
DJANGO_ALLOWED_HOSTS=ringoouchet.ru,www.ringoouchet.ru,91.229.90.72
```

**–ï—Å–ª–∏ —Ç–∞–∫–æ–π —Å—Ç—Ä–æ–∫–∏ –Ω–µ—Ç - –¥–æ–±–∞–≤—å—Ç–µ:**

```env
DJANGO_ALLOWED_HOSTS=ringoouchet.ru,www.ringoouchet.ru,91.229.90.72
```

**–í–∞–∂–Ω–æ:** 
- –†–∞–∑–¥–µ–ª—è–π—Ç–µ –¥–æ–º–µ–Ω—ã –∑–∞–ø—è—Ç—ã–º–∏
- –û—Å—Ç–∞–≤—å—Ç–µ IP —Ç–æ–∂–µ (–Ω–∞ —Å–ª—É—á–∞–π –ø—Ä–æ–±–ª–µ–º —Å –¥–æ–º–µ–Ω–æ–º)

**–°–æ—Ö—Ä–∞–Ω–∏—Ç–µ:** `Ctrl + O`, `Enter`, `Ctrl + X`

---

### –®–ê–ì 2: –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å API

```bash
docker compose -f docker-compose.prod.yml restart api
```

---

### –®–ê–ì 3: –ü—Ä–æ–≤–µ—Ä–∫–∞

**–ü–æ–¥–æ–∂–¥–∏—Ç–µ 10 —Å–µ–∫—É–Ω–¥ –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞, –∑–∞—Ç–µ–º:**

```bash
curl -v http://ringoouchet.ru/api/health/
```

**–î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å JSON –∏–ª–∏ 200/301, –Ω–æ –ù–ï 400.**

---

### –®–ê–ì 4: –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤ (–µ—Å–ª–∏ –≤—Å–µ –µ—â–µ 400)

```bash
docker compose -f docker-compose.prod.yml logs api | tail -30
```

**–ò—â–∏—Ç–µ –æ—à–∏–±–∫–∏ —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å ALLOWED_HOSTS.**

---

## ‚úÖ –ß–¢–û –î–û–õ–ñ–ù–û –ë–´–¢–¨ –í .ENV

```env
DJANGO_ALLOWED_HOSTS=ringoouchet.ru,www.ringoouchet.ru,91.229.90.72
```

**–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ 400 –¥–æ–ª–∂–Ω–∞ –∏—Å—á–µ–∑–Ω—É—Ç—å!**

