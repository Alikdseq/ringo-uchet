## Карта интеграции React Web фронта с backend API

Документ дополняет `ReactWeb_Routes.md` и фиксирует, какие страницы нового фронта вызывают какие эндпоинты backend.

---

## 1. Auth и профиль

| Страница / раздел                  | Метод + URL                        | Назначение                                      |
|------------------------------------|------------------------------------|-------------------------------------------------|
| `/login`                           | `POST /token/`                     | Логин по телефону/email/username + пароль       |
|                                    | `GET /users/me/`                   | Загрузка текущего пользователя после логина     |
| `/register`                        | `POST /users/register/`           | Регистрация нового пользователя (оператора)     |
|                                    | `POST /token/`                     | Автоматический логин после регистрации          |
| `/profile`                         | `GET /users/me/`                   | Данные профиля (через `AuthApi.getCurrentUser`) |
| `/profile/password`                | `POST /users/change-password/`     | Смена пароля текущего пользователя              |
| `/profile/salary` (оператор)      | `GET /users/operator/salary/`      | Зарплаты оператора и заказы с начислениями      |

---

## 2. Заявки (Orders)

| Страница / раздел                       | Метод + URL                                      | Назначение                                            |
|-----------------------------------------|--------------------------------------------------|-------------------------------------------------------|
| `/orders`                               | `GET /orders/`                                   | Список заявок с фильтрами и пагинацией                |
| `/orders/[orderId]`                     | `GET /orders/{id}/`                              | Детали заявки                                         |
| `/orders/create`                        | `POST /orders/`                                  | Создание новой заявки                                 |
|                                         | `GET /clients/`                                  | Поиск/выбор клиента в мастере                         |
| `/orders/[orderId]/edit`               | `PATCH /orders/{id}/`                            | Изменение заявки                                      |
| `/orders/[orderId]/complete`           | `POST /orders/{id}/complete/`                    | Завершение заявки, фиксация сумм                      |
| (кнопка статуса, будущий UI)           | `PATCH /orders/{id}/status/`                     | Смена статуса заявки                                  |
| (просмотр чека)                        | `GET /orders/{id}/receipt/`                      | Получение PDF‑чека                                   |
| (генерация счёта)                      | `POST /orders/{id}/generate_invoice/`            | Генерация счёта/акта                                 |
| (удаление заявки)                      | `POST /orders/{id}/delete/`                      | Логическое удаление заявки                           |

> В `OrdersApi` реализованы также локальные кеши (localStorage) и оффлайн‑очередь для создания/статусов/завершения.

---

## 3. Каталоги (Catalog)

| Страница / раздел               | Метод + URL                    | Назначение                                  |
|---------------------------------|--------------------------------|---------------------------------------------|
| `/catalog/equipment`            | `GET /equipment/`              | Список техники с фильтрацией по статусу     |
| `/catalog/services`             | `GET /services/`               | Список услуг                                |
| `/catalog/materials`            | `GET /materials/`              | Список материалов                           |
| `/catalog/clients`              | `GET /clients/`                | Список клиентов                             |
| (форма создания клиента)       | `POST /clients/`               | Создание нового клиента                     |

---

## 4. Отчёты и финансы

| Страница / раздел          | Метод + URL                           | Назначение                                  |
|----------------------------|---------------------------------------|---------------------------------------------|
| `/reports/summary`        | `GET /reports/summary/`              | Сводный финансовый отчёт                    |
| `/reports/equipment`      | `GET /reports/equipment/`            | Отчёт по технике                            |
| `/reports/employees`      | `GET /reports/employees/`            | Отчёт по сотрудникам/операторам             |

---

## 5. Уведомления и Web Push

| Страница / раздел                | Метод + URL                                         | Назначение                                       |
|----------------------------------|-----------------------------------------------------|--------------------------------------------------|
| `/profile/notifications`         | `GET /notifications/preferences/preferences/`       | Загрузка настроек уведомлений                    |
|                                  | `POST /notifications/preferences/preferences/`      | Обновление настроек уведомлений                  |
| (история уведомлений, при нужде) | `GET /notifications/preferences/logs/`              | История отправленных уведомлений                 |
| Web Push                         | `POST /notifications/device-tokens/`                | Регистрация `platform = "web"` токена устройства |

---

## 6. Оффлайн‑очередь

| Раздел                 | Метод + URL            | Назначение                                                |
|------------------------|------------------------|-----------------------------------------------------------|
| `/offline-queue`       | (client‑side only)     | Управление локальной очередью запросов (localStorage)     |
| Оффлайн‑очередь (сервис) | `POST /orders/…` и др. | Повтор запросов при восстановлении сети (через сервис)    |


