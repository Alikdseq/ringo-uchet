## üéØ –¶–µ–ª—å –¥–æ–∫—É–º–µ–Ω—Ç–∞

–≠—Ç–æ—Ç —Ñ–∞–π–ª –æ–ø–∏—Å—ã–≤–∞–µ—Ç **–ø–æ–ª–Ω—É—é –ª–æ–≥–∏–∫—É –∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å** —Ç–µ–∫—É—â–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è Ringo Uchet (Flutter + Django), –≤ —Ñ–æ—Ä–º–µ, —É–¥–æ–±–Ω–æ–π –¥–ª—è **–º–µ—Ö–∞–Ω–∏—á–µ—Å–∫–æ–≥–æ –ø–µ—Ä–µ–Ω–æ—Å–∞ –≤ Next.js 14 (App Router)**.  
–ò–¥–µ—è: —Ç—ã —á–∏—Ç–∞–µ—à—å —ç—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç —Å–≤–µ—Ä—Ö—É –≤–Ω–∏–∑ –∏ –ø—Ä–æ—Å—Ç–æ ¬´–ø–µ—Ä–µ–ø–∏—Å—ã–≤–∞–µ—à—å¬ª –µ–≥–æ –≤ –∫–æ–¥, –ø–æ—á—Ç–∏ –Ω–µ –¥—É–º–∞—è:

- –≥–¥–µ –∫–∞–∫–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã;
- –∫–∞–∫–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã;
- –∫–∞–∫–∏–µ —Å—Ç–µ–π—Ç—ã;
- –∫–∞–∫–∏–µ –∑–∞–ø—Ä–æ—Å—ã –∫ API;
- –∫–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –∞–≤—Ç–æ–ª–æ–≥–∏–Ω/–∫—ç—à/–æ—Ñ—Ñ–ª–∞–π–Ω;
- –∫–∞–∫ —É—Å—Ç—Ä–æ–µ–Ω—ã —Ñ–æ—Ä–º—ã –∏ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –∑–∞—è–≤–æ–∫.

–≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç **–¥–æ–ø–æ–ª–Ω—è–µ—Ç**:
- `ReactWeb_Architecture.md` ‚Äî –æ–±—â–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ñ—Ä–æ–Ω—Ç–∞;
- `ReactWeb_IntegrationMap.md` ‚Äî –∫–∞—Ä—Ç–∞ —Å—Ç—Ä–∞–Ω–∏—Ü ‚Üí —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã;
- `ReactWeb_Inventory.md` ‚Äî –ø–æ–¥—Ä–æ–±–Ω—ã–π –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å —ç–∫—Ä–∞–Ω–æ–≤ Flutter.

–ó–¥–µ—Å—å –º—ã –≤—Å—ë —Å–æ–±–∏—Ä–∞–µ–º **–≤ –æ–¥–∏–Ω —Å—Ü–µ–Ω–∞—Ä–Ω—ã–π –∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–Ω—ã–π –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä** –ø–æ–¥ Next.js.

---

## 1. –û–±—â–∞—è –º–æ–¥–µ–ª—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (–∫–∞–∫ –æ–Ω–æ ¬´–∂–∏–≤—ë—Ç¬ª)

### 1.1 –†–æ–ª–∏ –∏ –¥–æ—Å—Ç—É–ø—ã

–í —Å–∏—Å—Ç–µ–º–µ –µ—Å—Ç—å —Ä–æ–ª–∏ (`backend/users/models.py`):
- `admin` ‚Äî –ø–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø, –≤–∏–¥–∏—Ç –≤—Å—ë, —É–ø—Ä–∞–≤–ª—è–µ—Ç —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∞–º–∏ –∏ –æ—Ç—á—ë—Ç–∞–º–∏.
- `manager` ‚Äî —É–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞—è–≤–∫–∞–º–∏ –∏ –∫–ª–∏–µ–Ω—Ç–∞–º–∏, –≤–∏–¥–∏—Ç –æ—Ç—á—ë—Ç—ã.
- `operator` ‚Äî –≤–∏–¥–∏—Ç —Ç–æ–ª—å–∫–æ –Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–µ –µ–º—É –∑–∞—è–≤–∫–∏ –∏ —Å–≤–æ—é –∑–∞—Ä–ø–ª–∞—Ç—É.

–≠—Ç–æ –æ—Ç—Ä–∞–∂–∞–µ—Ç—Å—è –≤ UI:
- –Ω–∞–±–æ—Ä –≤–∫–ª–∞–¥–æ–∫/—Å—Ç—Ä–∞–Ω–∏—Ü;
- –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Å–æ–∑–¥–∞–≤–∞—Ç—å/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∑–∞—è–≤–∫–∏;
- —É—Ä–æ–≤–µ–Ω—å –¥–æ—Å—Ç—É–ø–∞ –∫ –æ—Ç—á—ë—Ç–∞–º –∏ –∫–∞—Ç–∞–ª–æ–≥–∞–º.

### 1.2 –ì–ª–∞–≤–Ω—ã–π –∂–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª —Ñ—Ä–æ–Ω—Ç–∞

–°—Ü–µ–Ω–∞—Ä–∏–π –∑–∞–ø—É—Å–∫–∞:

1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (web).
2. –§—Ä–æ–Ω—Ç:
   - –ø–æ–¥–Ω–∏–º–∞–µ—Ç auth‚Äëstore;
   - —á–∏—Ç–∞–µ—Ç —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–µ —Ç–æ–∫–µ–Ω—ã / –∫—Ä–µ–¥—ã –∏–∑ localStorage/secure‚Äë—Ö—Ä–∞–Ω–∏–ª–∏—â–∞;
   - –ø—ã—Ç–∞–µ—Ç—Å—è:
     - –æ–±–Ω–æ–≤–∏—Ç—å —Ç–æ–∫–µ–Ω —á–µ—Ä–µ–∑ refresh; –∏–ª–∏
     - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ª–æ–≥–∏–Ω–∏—Ç—å—Å—è –ø–æ —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–º —Ç–µ–ª–µ—Ñ–æ–Ω—É/email –∏ –ø–∞—Ä–æ–ª—é; –∏–ª–∏
     - –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ –∫—ç—à–∞ –∏ —Ä–∞–±–æ—Ç–∞—Ç—å –æ—Ñ—Ñ–ª–∞–π–Ω.
3. –ü–æ–∫–∞ –∏–¥—ë—Ç –ø—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ ‚Äî –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è **splash**.
4. –ü–æ—Å–ª–µ –ø—Ä–æ–≤–µ—Ä–∫–∏:
   - –µ—Å–ª–∏ `isAuthenticated == true` ‚Äî –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è **–æ—Å–Ω–æ–≤–Ω–æ–π layout** —Å –¥–∞—à–±–æ—Ä–¥–æ–º –∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–µ–π;
   - –µ—Å–ª–∏ –Ω–µ—Ç ‚Äî –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è **—ç–∫—Ä–∞–Ω –ª–æ–≥–∏–Ω–∞**.

–î–∞–ª—å—à–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–∂–µ –∂–∏–≤—ë—Ç –≤ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω–æ–º –º–∏—Ä–µ:
- –Ω–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ —Ä–∞–∑–¥–µ–ª–∞–º (Dashboard, –ó–∞—è–≤–∫–∏, –ù–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä–∞, –û—Ç—á—ë—Ç—ã/–ó–∞—Ä–ø–ª–∞—Ç—ã, –ü—Ä–æ—Ñ–∏–ª—å);
- –æ—Ñ—Ñ–ª–∞–π–Ω‚Äë—Ä–µ–∂–∏–º + –æ—á–µ—Ä–µ–¥—å;
- —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è.

---

## 2. –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –∏ –∞–≤—Ç–æ–ª–æ–≥–∏–Ω

–¶–µ–ª—å ‚Äî –ø–æ–≤—Ç–æ—Ä–∏—Ç—å –ø–æ–≤–µ–¥–µ–Ω–∏–µ Flutter (`mobile/HOW_LOGIN_WORKS.md`, `LOGIN_EXPLANATION.md`, `auth_notifier.dart`, `auth_service.dart`) **–æ–¥–∏–Ω –≤ –æ–¥–∏–Ω**.

### 2.1 –î–∞–Ω–Ω—ã–µ, –∫–æ—Ç–æ—Ä—ã–µ –º—ã —Ö—Ä–∞–Ω–∏–º –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ

–í –±–µ–∑–æ–ø–∞—Å–Ω–æ–º —Ö—Ä–∞–Ω–∏–ª–∏—â–µ (–Ω–∞ web ‚Äî —à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–π localStorage) —Ö—Ä–∞–Ω–∏–º:

1. **Access token** ‚Äî JWT –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –∑–∞–ø—Ä–æ—Å–æ–≤.
2. **Refresh token** ‚Äî JWT –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è access.
3. **–¢–µ–ª–µ—Ñ–æ–Ω / Email** ‚Äî –ª–æ–≥–∏–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
4. **–ü–∞—Ä–æ–ª—å** ‚Äî –≤ –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω–æ–º –≤–∏–¥–µ, –¥–ª—è –∞–≤—Ç–æ–ª–æ–≥–∏–Ω–∞.
5. **–î–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (`UserInfo`)** ‚Äî JSON, —á—Ç–æ–±—ã –º–æ–∂–Ω–æ –±—ã–ª–æ –º–æ–º–µ–Ω—Ç–∞–ª—å–Ω–æ –æ—Ç—Ä–∏—Å–æ–≤–∞—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å.

–ü—Ä–∏ logout –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é:
- —Ç–æ–∫–µ–Ω—ã –∏ `userData` –æ—á–∏—â–∞—é—Ç—Å—è;
- —Ç–µ–ª–µ—Ñ–æ–Ω/email –∏ –ø–∞—Ä–æ–ª—å **—Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è** (–¥–ª—è —Å–ª–µ–¥—É—é—â–µ–≥–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –≤—Ö–æ–¥–∞), **–µ—Å–ª–∏ —è–≤–Ω–æ –Ω–µ —É–∫–∞–∑–∞–Ω–æ –æ–±—Ä–∞—Ç–Ω–æ–µ**.

### 2.2 –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã backend –¥–ª—è auth

–ò–∑ `ringo_backend/api_urls.py` –∏ `users/views.py`:

- `POST /token/` ‚Äî –ª–æ–≥–∏–Ω –ø–æ —Ç–µ–ª–µ—Ñ–æ–Ω—É/email/username + –ø–∞—Ä–æ–ª—å.
- `POST /token/refresh/` ‚Äî –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ access —Ç–æ–∫–µ–Ω–∞ –ø–æ refresh.
- `POST /token/blacklist/` ‚Äî logout (–∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è refresh).
- `GET /users/me/` ‚Äî —Ç–µ–∫—É—â–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å.
- `POST /users/register/` ‚Äî —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (—Ä–æ–ª—å `operator`).
- `POST /users/change-password/` ‚Äî —Å–º–µ–Ω–∞ –ø–∞—Ä–æ–ª—è.
- `GET /users/operator/salary/` ‚Äî –∑–∞—Ä–ø–ª–∞—Ç—ã –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞ (–ª–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞).

–ù–∞ —Å—Ç–æ—Ä–æ–Ω–µ Django:
- `CustomTokenObtainPairSerializer` –ø—Ä–∏–Ω–∏–º–∞–µ—Ç `phone`/`email`/`username` + `password`, –Ω–æ—Ä–º–∞–ª–∏–∑—É–µ—Ç —Ç–µ–ª–µ—Ñ–æ–Ω –∏ –∏—â–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

### 2.3 –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ auth –Ω–∞ Next.js

**Store: `useAuthStore` (Zustand)** ‚Äî –∞–Ω–∞–ª–æ–≥ `AuthNotifier`:

- –°–æ—Å—Ç–æ—è–Ω–∏–µ:
  - `isAuthenticated: boolean`;
  - `isLoading: boolean`;
  - `user: User | null`;
  - `error: string | null`;
  - `accessToken: string | null`;
  - `refreshToken: string | null`;
  - `cachedUserJson: string | null` (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ).
- –ú–µ—Ç–æ–¥—ã:
  - `initAuth()` ‚Äî –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –æ–¥–∏–Ω —Ä–∞–∑ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:
    - —á–∏—Ç–∞–µ—Ç `access`, `refresh`, `phone/email`, `password`, `userData` –∏–∑ storage;
    - –µ—Å–ª–∏ –µ—Å—Ç—å `userData`:
      - **—Å—Ä–∞–∑—É** —Å—Ç–∞–≤–∏—Ç `isAuthenticated = true`, `user = parsedUser` ‚Üí UI –º–≥–Ω–æ–≤–µ–Ω–Ω–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≥–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω (–∫–∞–∫ Flutter);
    - –µ—Å–ª–∏ –µ—Å—Ç—å `refresh`:
      - –ø—ã—Ç–∞–µ—Ç—Å—è `refreshTokenSafe()`; –ø—Ä–∏ —É—Å–ø–µ—Ö–µ ‚Äî —Ñ–æ–Ω–æ–≤—ã–π `loadCurrentUser()`;
    - –µ—Å–ª–∏ refresh –Ω–µ—Ç / –∏—Å—Ç—ë–∫:
      - –ø—ã—Ç–∞–µ—Ç—Å—è `autoLoginFromSavedCredentials()` (—Å–º. –Ω–∏–∂–µ);
    - –µ—Å–ª–∏ **–Ω–∏—á–µ–≥–æ** –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–ª–æ –∏ –Ω–µ—Ç –∫—ç—à–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:
      - `isAuthenticated = false` ‚Üí –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —ç–∫—Ä–∞–Ω –ª–æ–≥–∏–Ω–∞.
  - `login(credentials)`:
    - `POST /token/` ‚Üí –µ—Å–ª–∏ –æ–∫:
      - —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç `access`, `refresh`, —Ç–µ–ª–µ—Ñ–æ–Ω/email –∏ –ø–∞—Ä–æ–ª—å –≤ storage;
      - –¥–µ–ª–∞–µ—Ç `GET /users/me/` –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç `user` –∏ `userData` –≤ storage;
      - `isAuthenticated = true`.
  - `refreshTokenSafe()`:
    - –µ—Å–ª–∏ `refreshToken` –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç ‚Üí `false`;
    - `POST /token/refresh/` ‚Üí –ø—Ä–∏ 200:
      - –æ–±–Ω–æ–≤–ª—è–µ—Ç access, true;
    - –ø—Ä–∏ 401:
      - –æ—á–∏—â–∞–µ—Ç —Ç–æ–∫–µ–Ω, –Ω–æ **–Ω–µ** —Ç—Ä–æ–≥–∞–µ—Ç —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–µ –∫—Ä–µ–¥—ã ‚Üí false.
  - `autoLoginFromSavedCredentials()`:
    - —á–∏—Ç–∞–µ—Ç `phone/email + password` –∏–∑ storage;
    - –µ—Å–ª–∏ –∏—Ö –Ω–µ—Ç ‚Üí false;
    - –≤—ã–∑—ã–≤–∞–µ—Ç `login(credentials)` **–±–µ–∑** UI‚Äë–∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞ –∏ –±–µ–∑ –ø–æ–∫–∞–∑–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã /login;
    - –ø—Ä–∏ —É—Å–ø–µ—Ö–µ ‚Üí true, –æ—Å—Ç–∞—ë–º—Å—è –Ω–∞ –≥–ª–∞–≤–Ω–æ–º —ç–∫—Ä–∞–Ω–µ.
  - `logout({ clearSavedCredentials?: boolean })`:
    - –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç `POST /token/blacklist/` —Å —Ç–µ–∫—É—â–∏–º refresh (best effort);
    - –æ—á–∏—â–∞–µ—Ç —Ç–æ–∫–µ–Ω—ã –∏ `userData` –≤ storage;
    - –µ—Å–ª–∏ `clearSavedCredentials`:
      - –æ–±–Ω—É–ª—è–µ—Ç —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–µ –ª–æ–≥–∏–Ω/–ø–∞—Ä–æ–ª—å;
    - –∏–Ω–∞—á–µ:
      - –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –Ω–∞–∑–∞–¥ —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–µ —Ç–µ–ª–µ—Ñ–æ–Ω/email –∏ –ø–∞—Ä–æ–ª—å (–∫–∞–∫ –≤ Flutter);
    - `isAuthenticated = false`, `user = null`.

**HTTP‚Äë–∫–ª–∏–µ–Ω—Ç (`httpClient.ts`)**:

- `Authorization: Bearer <accessToken>` –≤ –∫–∞–∂–¥–æ–º –∑–∞–ø—Ä–æ—Å–µ (–µ—Å–ª–∏ —Ç–æ–∫–µ–Ω –µ—Å—Ç—å).
- Response‚Äëinterceptor:
  - –µ—Å–ª–∏ 401 –∏ –∑–∞–ø—Ä–æ—Å **–Ω–µ** –±—ã–ª `/token/` –∏–ª–∏ `/token/refresh/`:
    - –ø—ã—Ç–∞–µ–º—Å—è `refreshTokenSafe()`;
    - –µ—Å–ª–∏ —É—Å–ø–µ—Ö ‚Üí –ø–æ–≤—Ç–æ—Ä—è–µ–º –∏—Å—Ö–æ–¥–Ω—ã–π –∑–∞–ø—Ä–æ—Å **–æ–¥–∏–Ω —Ä–∞–∑**;
    - –µ—Å–ª–∏ —Å–Ω–æ–≤–∞ 401 –∏–ª–∏ refresh –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–ª:
      - –ø–µ—Ä–µ–≤–æ–¥–∏–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–µ ¬´–Ω–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω¬ª (–∏ –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –∫—ç—à–∞ ‚Äî –Ω–∞ `/login`).

### 2.4 –≠–∫—Ä–∞–Ω—ã auth

**`/login`** (`(auth)/login/page.tsx`):

- –§–æ—Ä–º–∞:
  - –ü–æ–ª–µ `–¢–µ–ª–µ—Ñ–æ–Ω` (digits only, –Ω–æ –º–æ–∂–Ω–æ —Ä–∞–∑—Ä–µ—à–∏—Ç—å –≤–≤–æ–¥ —Å + –∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ; –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π –Ω–æ—Ä–º–∞–ª–∏–∑—É–µ–º).
  - –ü–æ–ª–µ `Email (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)`.
  - –ü–æ–ª–µ `–ü–∞—Ä–æ–ª—å`.
- –ü–æ–≤–µ–¥–µ–Ω–∏–µ:
  - –¢—Ä–µ–±—É–µ—Ç—Å—è –º–∏–Ω–∏–º—É–º –æ–¥–∏–Ω –∏–∑: —Ç–µ–ª–µ—Ñ–æ–Ω –∏–ª–∏ email.
  - –ü—Ä–∏ —Å–∞–±–º–∏—Ç–µ –≤—ã–∑—ã–≤–∞–µ–º `authApi.login()`:
    - `POST /token/` —Å `{ phone | email | username, password }`.
  - –ü—Ä–∏ —É—Å–ø–µ—Ö–µ:
    - `useAuthStore.login` —É–∂–µ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç `isAuthenticated = true`;
    - –¥–µ–ª–∞–µ–º `router.replace('/')` (–¥–æ–º–∞—à–Ω—è—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞).
  - –ü—Ä–∏ –æ—à–∏–±–∫–∞—Ö (401, 400, 429 –∏ —Ç.–¥.):
    - –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –∫—Ä–∞—Å–Ω—ã–π –±–ª–æ–∫ —Å —Ç–µ–∫—Å—Ç–æ–º –æ—à–∏–±–∫–∏ (–∫–∞–∫ –≤ Flutter).

**`/register`** (`(auth)/register/page.tsx`):

- –§–æ—Ä–º–∞:
  - `–ò–º—è`, `–§–∞–º–∏–ª–∏—è`, `–¢–µ–ª–µ—Ñ–æ–Ω`, `–ü–∞—Ä–æ–ª—å`.
- –ü—Ä–∏ —Å–∞–±–º–∏—Ç–µ:
  - `POST /users/register/`.
  - –ü—Ä–∏ —É—Å–ø–µ—Ö–µ (201):
    - –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ —Å—Ä–∞–∑—É –¥–µ–ª–∞–µ–º `POST /token/` –∏ –≤—Ö–æ–¥–∏–º, –∫–∞–∫ Flutter.

**Guard**:

- –î–ª—è auth‚Äë—Å—Ç—Ä–∞–Ω–∏—Ü:
  - –µ—Å–ª–∏ `isAuthenticated == true` ‚Üí —Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ `/`.
- –î–ª—è app‚Äë—Å—Ç—Ä–∞–Ω–∏—Ü:
  - –µ—Å–ª–∏ `!isAuthenticated && !isLoading && –Ω–µ—Ç –∫—ç—à–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è` ‚Üí —Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ `/login`.
  - –µ—Å–ª–∏ `–µ—Å—Ç—å –∫—ç—à –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –Ω–æ –ø—Ä–æ–±–ª–µ–º—ã —Å —Å–µ—Ç—å—é` ‚Üí –ø—Ä–æ–¥–æ–ª–∂–∞–µ–º —Ä–µ–Ω–¥–µ—Ä–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ –æ—Ñ—Ñ–ª–∞–π–Ω‚Äë—Ä–µ–∂–∏–º–µ.

---

## 3. –ì–ª–∞–≤–Ω—ã–π layout –∏ –Ω–∞–≤–∏–≥–∞—Ü–∏—è

–ú—ã –ø–æ–≤—Ç–æ—Ä—è–µ–º —Å—Ç—Ä—É–∫—Ç—É—Ä—É Flutter `RingoApp`:

### 3.1 Root layout (`app/layout.tsx`)

- –ü–æ–¥–∫–ª—é—á–∞–µ—Ç:
  - Tailwind / –≥–ª–æ–±–∞–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏.
  - `<QueryClientProvider>`.
  - `<AuthProvider>` ‚Äî –æ–±—ë—Ä—Ç–∫–∞, –≤—ã–∑—ã–≤–∞—é—â–∞—è `useAuthStore.initAuth()` –æ–¥–∏–Ω —Ä–∞–∑.
  - `<ToastProvider>` ‚Äî –≥–ª–æ–±–∞–ª—å–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è.
  - `<OfflineProvider>` (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ).
- HTML:
  - `<html lang="ru">`.
  - `<body>` —Å –∫–æ—Ä–Ω–µ–≤—ã–º layout.

### 3.2 Auth layout (`app/(auth)/layout.tsx`)

- –¶–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä:
  - –ª–æ–≥–æ—Ç–∏–ø Ringo;
  - –∑–∞–≥–æ–ª–æ–≤–æ–∫ (`–í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É` / `–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è`).
- –§–æ–Ω:
  - –≥—Ä–∞–¥–∏–µ–Ω—Ç/–∫–∞—Ä—Ç–∏–Ω–∫–∞ –≤ –¥—É—Ö–µ Flutter splash‚Äë—ç–∫—Ä–∞–Ω–∞.

### 3.3 App layout (`app/(app)/layout.tsx`)

- –°–æ—Å—Ç–æ–∏—Ç –∏–∑:
  - `<OfflineBanner>` –≤–≤–µ—Ä—Ö—É (–µ—Å–ª–∏ –Ω–µ—Ç —Å–µ—Ç–∏).
  - `<AppShell>`:
    - `TopBar` —Å:
      - —Ç–µ–∫—É—â–∏–º –∑–∞–≥–æ–ª–æ–≤–∫–æ–º (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç –º–∞—Ä—à—Ä—É—Ç–∞);
      - –∫–Ω–æ–ø–∫–æ–π –º–µ–Ω—é (–º–æ–±–∏–ª—å–Ω—ã–π Drawer);
      - –∫–Ω–æ–ø–∫–æ–π logout.
    - `SideNav` (desktop):
      - –ø—É–Ω–∫—Ç—ã –∑–∞–≤–∏—Å—è—Ç –æ—Ç —Ä–æ–ª–∏:
        - –í—Å–µ–≥–¥–∞: Dashboard, –ó–∞—è–≤–∫–∏, –ü—Ä–æ—Ñ–∏–ª—å.
        - Admin/Manager: –ù–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä–∞, –û—Ç—á—ë—Ç—ã.
        - Operator: –ó–∞—Ä–ø–ª–∞—Ç—ã (–≤–º–µ—Å—Ç–æ –û—Ç—á—ë—Ç–æ–≤).
    - `BottomNav` (mobile):
      - –ø–æ–≤—Ç–æ—Ä—è–µ—Ç SideNav, –Ω–æ –≤–Ω–∏–∑—É.
    - `main` ‚Äî —Å—é–¥–∞ —Ä–µ–Ω–¥–µ—Ä—è—Ç—Å—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã (`children`).

–ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ —Ä–∞–∑–¥–µ–ª–∞–º (–¥–ª—è –∫–ª–∏–µ–Ω—Ç–∞) –ø–æ–≤—Ç–æ—Ä—è–µ—Ç Flutter:
- –ò–Ω–¥–µ–∫—Å —Ç–µ–∫—É—â–µ–π –≤–∫–ª–∞–¥–∫–∏ —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ `useLayoutStore` (Zustand).
- –ü—Ä–∏ –∫–ª–∏–∫–µ –ø–æ –ø—É–Ω–∫—Ç—É:
  - –æ–±–Ω–æ–≤–ª—è–µ–º –º–∞—Ä—à—Ä—É—Ç (`router.push('/orders')` –∏ —Ç.–ø.);
  - –æ–±–Ω–æ–≤–ª—è–µ–º –∏–Ω–¥–µ–∫—Å –≤–æ `useLayoutStore` (–¥–ª—è sync –Ω–∏–∂–Ω–µ–π –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ –∏ drawer).

---

## 4. –°—Ç—Ä–∞–Ω–∏—Ü—ã –∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å (–æ–¥–∏–Ω –∫ –æ–¥–Ω–æ–º—É —Å Flutter)

–ù–∏–∂–µ ‚Äî **–ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –¢–ó** –¥–ª—è Next.js: –∫–∞–∫–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏, –∫–∞–∫–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∏ –∫–∞–∫–∞—è –ª–æ–≥–∏–∫–∞.

### 4.1 Dashboard (`app/(app)/page.tsx`)

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –±—ã—Å—Ç—Ä—ã–π –æ–±–∑–æ—Ä —Å–∏—Å—Ç–µ–º—ã.

–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:

- `KpiCards`:
  - –ö–∞—Ä—Ç–æ—á–∫–∞ ¬´–ù–æ–≤—ã–µ –∑–∞—è–≤–∫–∏¬ª:
    - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞—è–≤–æ–∫ –≤ —Å—Ç–∞—Ç—É—Å–∞—Ö `CREATED` –∏ `APPROVED`.
  - –ö–∞—Ä—Ç–æ—á–∫–∞ ¬´–í —Ä–∞–±–æ—Ç–µ¬ª:
    - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞—è–≤–æ–∫ `IN_PROGRESS`.
  - –ö–∞—Ä—Ç–æ—á–∫–∞ ¬´–î–æ—Ö–æ–¥¬ª (—Ç–æ–ª—å–∫–æ admin/manager):
    - –°—É–º–º–∞ `total_amount` –ø–æ –∑–∞–≤–µ—Ä—à—ë–Ω–Ω—ã–º –∑–∞—è–≤–∫–∞–º –∑–∞ –≤—ã–±—Ä–∞–Ω–Ω—ã–π –ø–µ—Ä–∏–æ–¥.
- `OrdersTrendChart`:
  - –ì—Ä–∞—Ñ–∏–∫ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∑–∞—è–≤–æ–∫ –ø–æ –¥–Ω—è–º –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 7/30 –¥–Ω–µ–π.
- `QuickActions`:
  - –ö–Ω–æ–ø–∫–∞ ¬´–°–æ–∑–¥–∞—Ç—å –∑–∞—è–≤–∫—É¬ª ‚Üí `/orders/create`.
  - –ö–Ω–æ–ø–∫–∞ ¬´–ü–µ—Ä–µ–π—Ç–∏ –≤ –æ—Ç—á—ë—Ç—ã¬ª (–¥–ª—è admin/manager) ‚Üí `/reports/summary`.

–î–∞–Ω–Ω—ã–µ:

- React Query:
  - `GET /orders/` —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏ –ø–æ —Å—Ç–∞—Ç—É—Å–∞–º –∏ –¥–∞—Ç–∞–º.
  - –î–ª—è –≥—Ä–∞—Ñ–∏–∫–∞ ‚Äî –ª–∏–±–æ —Å–µ—Ä–≤–µ—Ä–Ω—ã–π –æ—Ç—á—ë—Ç (–µ—Å–ª–∏ –¥–æ–±–∞–≤–∏–º), –ª–∏–±–æ –∫–ª–∏–µ–Ω—Ç—Å–∫–∞—è –∞–≥—Ä–µ–≥–∞—Ü–∏—è.

### 4.2 –°–ø–∏—Å–æ–∫ –∑–∞—è–≤–æ–∫ (`app/(app)/orders/page.tsx`)

–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:

- `StatusTabs`:
  - –¢–∞–±—ã: `–í—Å–µ`, `CREATED`, `APPROVED`, `IN_PROGRESS`, `COMPLETED`, `CANCELLED`.
  - –£–ø—Ä–∞–≤–ª—è—é—Ç query‚Äë–ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º `status`.
- `SearchBar`:
  - –ò–Ω–ø—É—Ç —Å debounce (–∞–Ω–∞–ª–æ–≥ Flutter `debouncer`).
  - –ò—â–µ—Ç –ø–æ –Ω–æ–º–µ—Ä—É, –∫–ª–∏–µ–Ω—Ç—É, –∞–¥—Ä–µ—Å—É.
- `OrdersTable` / `OrdersCards`:
  - Desktop: —Ç–∞–±–ª–∏—Ü–∞.
  - Mobile: –∫–∞—Ä—Ç–æ—á–∫–∏.
  - –ö–æ–ª–æ–Ω–∫–∏/–ø–æ–ª—è:
    - –ù–æ–º–µ—Ä.
    - –°—Ç–∞—Ç—É—Å + —Ü–≤–µ—Ç.
    - –ö–ª–∏–µ–Ω—Ç.
    - –ê–¥—Ä–µ—Å.
    - –î–∞—Ç–∞/–≤—Ä–µ–º—è –Ω–∞—á–∞–ª–∞ (–∏, –µ—Å–ª–∏ –µ—Å—Ç—å, –æ–∫–æ–Ω—á–∞–Ω–∏—è).
    - –°—É–º–º–∞ (`total_amount`) ‚Äî –¥–ª—è admin/manager.
    - –î–ª—è –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞ –º–æ–∂–Ω–æ —Å–∫—Ä—ã—Ç—å —Ñ–∏–Ω–∞–Ω—Å—ã –∏–ª–∏ –ø–æ–∫–∞–∑–∞—Ç—å —Ç–æ–ª—å–∫–æ –Ω—É–∂–Ω—ã–µ —á–∞—Å—Ç–∏.
- `OfflineIndicator`:
  - –ï—Å–ª–∏ –¥–∞–Ω–Ω—ã–µ –≤–∑—è—Ç—ã –∏–∑ –∫—ç—à–∞ (–æ—à–∏–±–∫–∞ —Å–µ—Ç–∏) ‚Äî –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –ø–ª–∞—à–∫—É ¬´–û—Ñ—Ñ–ª–∞–π–Ω. –ü–æ–∫–∞–∑–∞–Ω—ã —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ¬ª.

–î–∞–Ω–Ω—ã–µ:

- React Query: `GET /orders/` —á–µ—Ä–µ–∑ `OrdersApi.getOrders(filters)`.
- Query‚Äë–∫–ª—é—á: `['orders', status, search, page]`.
- –û—à–∏–±–∫–∏ —Å–µ—Ç–∏ ‚Üí –ø–æ–ø—ã—Ç–∫–∞ –≤–∑—è—Ç—å –∫—ç—à –∏–∑ IndexedDB/localStorage (–∫–∞–∫ –≤ `OrderService`/`CacheService` —É Flutter).

### 4.3 –î–µ—Ç–∞–ª—å –∑–∞—è–≤–∫–∏ (`app/(app)/orders/[orderId]/page.tsx`)

–ë–ª–æ–∫–∏:

1. **Header**:
   - –ù–æ–º–µ—Ä –∑–∞—è–≤–∫–∏ + —Ü–≤–µ—Ç–Ω–æ–π –±–µ–π–¥–∂ —Å—Ç–∞—Ç—É—Å–∞.
   - –î–µ–π—Å—Ç–≤–∏—è:
     - –ö–Ω–æ–ø–∫–∞ ¬´–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å¬ª ‚Üí `/orders/[id]/edit` (admin/manager).
     - –ö–Ω–æ–ø–∫–∞ ¬´–ó–∞–≤–µ—Ä—à–∏—Ç—å¬ª ‚Üí `/orders/[id]/complete` (IN_PROGRESS).
     - –ö–Ω–æ–ø–∫–∞ ¬´–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —á–µ–∫¬ª (GET `/orders/{id}/receipt/`).

2. **–û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è**:
   - –ö–ª–∏–µ–Ω—Ç: –∏–º—è, —Ç–µ–ª–µ—Ñ–æ–Ω, email (–µ—Å–ª–∏ –µ—Å—Ç—å).
   - –ê–¥—Ä–µ—Å (—Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –∫–ª–∏–∫–Ω—É—Ç—å –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è –∫–∞—Ä—Ç—ã).
   - –î–∞—Ç—ã: —Å–æ–∑–¥–∞–Ω–∏—è, –Ω–∞—á–∞–ª–∞, –æ–∫–æ–Ω—á–∞–Ω–∏—è.
   - –°–æ–∑–¥–∞–ª (`created_by`), –º–µ–Ω–µ–¥–∂–µ—Ä, –æ–ø–µ—Ä–∞—Ç–æ—Ä—ã (—Å–ø–∏—Å–æ–∫).

3. **–ü–æ–∑–∏—Ü–∏–∏ (`OrderItems`)**:
   - –¢–∞–±–ª–∏—Ü–∞ –ø–æ `OrderItem`:
     - –ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ (`name_snapshot`).
     - –¢–∏–ø (—Ç–µ—Ö–Ω–∏–∫–∞, —É—Å–ª—É–≥–∞, –º–∞—Ç–µ—Ä–∏–∞–ª, –Ω–∞–≤–µ—Å–∫–∞).
     - –ö–æ–ª-–≤–æ (`display_quantity`).
     - –ï–¥–∏–Ω–∏—Ü–∞ (`display_unit`).
     - –¶–µ–Ω–∞, —Å–∫–∏–¥–∫–∞, –Ω–∞–ª–æ–≥.
     - –ò—Ç–æ–≥–æ –ø–æ —Å—Ç—Ä–æ–∫–µ (`line_total`).
   - –°—É–º–º—ã:
     - `prepayment_amount`, `prepayment_status`.
     - `total_amount`.

4. **–¢–∞–π–º–ª–∞–π–Ω —Å—Ç–∞—Ç—É—Å–æ–≤ (`StatusTimeline`)**:
   - –°–ø–∏—Å–æ–∫ –∑–∞–ø–∏—Å–µ–π `OrderStatusLog`:
     - –û—Ç ‚Üí –∫ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `CREATED ‚Üí APPROVED`).
     - –§–ò–û –∞–≤—Ç–æ—Ä–∞.
     - –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π.
     - –í—Ä–µ–º—è.

5. **–§–æ—Ç–æ (`PhotoEvidence`)**:
   - –ì–∞–ª–µ—Ä–µ—è:
     - –¢–∏–ø: –¥–æ/–ø–æ—Å–ª–µ/–∏–Ω—Ü–∏–¥–µ–Ω—Ç.
     - –ü—Ä–µ–≤—å—é, –ø–æ –∫–ª–∏–∫—É ‚Äî –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä.

–î–∞–Ω–Ω—ã–µ:

- `GET /orders/{id}/` –¥–∞—ë—Ç –≤—Å—ë —ç—Ç–æ —á–µ—Ä–µ–∑ `OrderSerializer`:
  - `client`, `manager`, `operators`, `items`, `status_logs`, `photos`.

### 4.4 –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞—è–≤–∫–∏ (`app/(app)/orders/create/page.tsx`)

–≠—Ç–æ –ø—Ä—è–º–æ–π –ø–µ—Ä–µ–Ω–æ—Å `CreateOrderScreen`:

–§–æ—Ä–º–∞:

1. **–î–∞–Ω–Ω—ã–µ –∫–ª–∏–µ–Ω—Ç–∞**:
   - `–§–ò–û –∫–ª–∏–µ–Ω—Ç–∞ *`.
   - `–ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞ *`.
   - `–ê–¥—Ä–µ—Å *`.
2. **–û–ø–∏—Å–∞–Ω–∏–µ –∑–∞—è–≤–∫–∏**:
   - –ú–Ω–æ–≥–æ—Å—Ç—Ä–æ—á–Ω–æ–µ –ø–æ–ª–µ `–û–ø–∏—Å–∞–Ω–∏–µ` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ).
3. **–û–ø–µ—Ä–∞—Ç–æ—Ä—ã**:
   - –ï—Å–ª–∏ `GET /users/operators/` —É—Å–ø–µ—à–µ–Ω:
     - –°–ø–∏—Å–æ–∫ —á–µ–∫–±–æ–∫—Å–æ–≤ –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤ (–§–ò–û + —Ç–µ–ª–µ—Ñ–æ–Ω).
     - –ú–æ–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤.  
   - –ï—Å–ª–∏ —ç–Ω–¥–ø–æ–∏–Ω—Ç –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω:
     - –ü–æ–ª–µ `ID –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤ —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)` —Å –ø–æ–¥—Å–∫–∞–∑–∫–æ–π, —á—Ç–æ –±—Ä–∞—Ç—å ID –∏–∑ —Å–∏—Å—Ç–µ–º—ã.
4. **–ù–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)**:
   - –ö–∞—Ä—Ç–æ—á–∫–∞ —Å–æ —Å–ø–∏—Å–∫–æ–º –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö –ø–æ–∑–∏—Ü–∏–π.
   - –ö–Ω–æ–ø–∫–∞ ¬´–î–æ–±–∞–≤–∏—Ç—å¬ª:
     - –ú–æ–¥–∞–ª–∫–∞ –≤—ã–±–æ—Ä–∞:
       - –¢–µ—Ö–Ω–∏–∫–∞ (equipment).
       - –£—Å–ª—É–≥–∏ (services).
       - –ú–∞—Ç–µ—Ä–∏–∞–ª—ã/–≥—Ä—É–Ω—Ç (materials).
       - –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã/–Ω–∞–≤–µ—Å–∫–∞ (–µ—Å–ª–∏ –µ—Å—Ç—å).
     - –ò—Å—Ç–æ—á–Ω–∏–∫: `GET /equipment/`, `GET /services/`, `GET /materials/`.
5. **–ü—Ä–∏–º–µ—Ä–Ω–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)**:
   - –ü–æ–ª–µ `–ü—Ä–∏–º–µ—Ä–Ω–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å (‚ÇΩ)`:
     - –ú–æ–∂–Ω–æ –æ—Å—Ç–∞–≤–∏—Ç—å –ø—É—Å—Ç—ã–º.
     - –ú–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –∑–∞—è–≤–∫—É –ª–∏–±–æ:
       - —Ç–æ–ª—å–∫–æ —Å –ø—Ä–∏–º–µ—Ä–Ω–æ–π —Å—Ç–æ–∏–º–æ—Å—Ç—å—é;
       - —Ç–æ–ª—å–∫–æ —Å –Ω–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä–æ–π;
       - –∏–ª–∏ —Å –æ–±–æ–∏–º–∏, –Ω–æ —Ç–æ–≥–¥–∞ `total_amount` –≤—Å—ë —Ä–∞–≤–Ω–æ —Å—á–∏—Ç–∞–µ—Ç—Å—è –ø–æ –Ω–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä–µ.
6. **–§–ª–∞–≥ ‚Äú–û–¥–æ–±—Ä–∏—Ç—å –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏‚Äù**:
   - –ß–µ–∫–±–æ–∫—Å.
   - –ï—Å–ª–∏ –≤–∫–ª—é—á—ë–Ω ‚Üí —Å–æ–∑–¥–∞—ë–º —Å—Ä–∞–∑—É –≤ —Å—Ç–∞—Ç—É—Å–µ `APPROVED`, –∏–Ω–∞—á–µ `CREATED`.
7. **–î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞**:
   - –ü–æ–ª–µ —Å –≤—ã–±–æ—Ä–æ–º –¥–∞—Ç—ã –∏ –≤—Ä–µ–º–µ–Ω–∏ (`DatePicker + TimePicker`).
   - –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ.

–ü–æ–≤–µ–¥–µ–Ω–∏–µ:

- –ü—Ä–∏ –ø–µ—Ä–≤–æ–º –≤—Ö–æ–¥–µ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É:
  - –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ‚Äî admin:
    - –ø—ã—Ç–∞–µ–º—Å—è –ø–æ–ª—É—á–∏—Ç—å —á–µ—Ä–Ω–æ–≤–∏–∫–∏ `GET /orders/?status=DRAFT`;
    - –µ—Å–ª–∏ –ø–æ—Å–ª–µ–¥–Ω—è—è DRAFT –∑–∞—è–≤–∫–∞ —Å–æ–∑–¥–∞–Ω–∞ —Ç–µ–∫—É—â–∏–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º:
      - –ø–æ–¥—Å—Ç–∞–≤–ª—è–µ–º –µ—ë –≤ —Ñ–æ—Ä–º—É –∫–∞–∫ –Ω–∞—á–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ.
- –ü—Ä–∏ —É—Ö–æ–¥–µ —Å–æ —Å—Ç—Ä–∞–Ω–∏—Ü—ã (back):
  - –ï—Å–ª–∏ –µ—Å—Ç—å –Ω–µ—Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:
    - —Å–æ—Ö—Ä–∞–Ω—è–µ–º —á–µ—Ä–Ω–æ–≤–∏–∫:
      - –µ—Å–ª–∏ `_draftOrderId` –µ—Å—Ç—å ‚Üí `PATCH /orders/{id}/` —Å–æ `status = DRAFT`;
      - –∏–Ω–∞—á–µ:
        - —Å–æ–∑–¥–∞—ë–º –≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ –∫–ª–∏–µ–Ω—Ç–∞:
          - `POST /clients/` (–µ—Å–ª–∏ —Ç–∞–∫–∏—Ö –Ω–µ—Ç –µ—â—ë);
        - –¥–µ–ª–∞–µ–º `POST /orders/` —Å–æ `status = DRAFT`.

–°–∞–±–º–∏—Ç ¬´–°–æ–∑–¥–∞—Ç—å –∑–∞—è–≤–∫—É¬ª:

- –í–∞–ª–∏–¥–∞—Ü–∏—è:
  - –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è (`–§–ò–û`, —Ç–µ–ª–µ—Ñ–æ–Ω, –∞–¥—Ä–µ—Å, –¥–∞—Ç–∞ –Ω–∞—á–∞–ª–∞).
- –î–∞–ª—å—à–µ:
  - –µ—Å–ª–∏ –µ—Å—Ç—å `_draftOrderId`:
    - `PATCH /orders/{draftId}/`:
      - –æ–±–Ω–æ–≤–ª—è–µ–º –∫–ª–∏–µ–Ω—Ç–∞ (—á–µ—Ä–µ–∑ `/clients/` –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏);
      - –∑–∞–¥–∞—ë–º —Å—Ç–∞—Ç—É—Å `CREATED` –∏–ª–∏ `APPROVED`.
  - –µ—Å–ª–∏ —ç—Ç–æ –Ω–æ–≤–∞—è –∑–∞—è–≤–∫–∞:
    - —Å–æ–∑–¥–∞—ë–º –∫–ª–∏–µ–Ω—Ç–∞ —á–µ—Ä–µ–∑ `/clients/`;
    - `POST /orders/` —Å:
      - `client_id`;
      - `address`, `start_dt`, `description`;
      - `operator_ids` –∏–ª–∏ `operator_id`;
      - `items` (–µ—Å–ª–∏ –µ—Å—Ç—å –Ω–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä–∞);
      - `total_amount` (–ø—Ä–∏–º–µ—Ä–Ω–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å, –µ—Å–ª–∏ –Ω–µ—Ç items);
      - `status` (`CREATED` / `APPROVED`).
- –ü–æ —É—Å–ø–µ—Ö—É:
  - –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—Å—è –Ω–∞ `/orders` –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º `toast: "–ó–∞—è–≤–∫–∞ —Å–æ–∑–¥–∞–Ω–∞"`.

### 4.5 –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞—è–≤–∫–∏ (`app/(app)/orders/[orderId]/edit/page.tsx`)

–ü–æ—Ö–æ–∂–µ –Ω–∞ `create`, –Ω–æ:

- –≥—Ä—É–∑–∏–º —Ç–µ–∫—É—â–∏–µ –¥–∞–Ω–Ω—ã–µ –∑–∞—è–≤–∫–∏ `GET /orders/{id}/`;
- —Ñ–æ—Ä–º–∞ –ø—Ä–µ–¥–∑–∞–ø–æ–ª–Ω–µ–Ω–∞:
  - –∫–ª–∏–µ–Ω—Ç (–æ–≥—Ä–∞–Ω–∏—á–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º),
  - –∞–¥—Ä–µ—Å, –æ–ø–∏—Å–∞–Ω–∏–µ, –¥–∞—Ç–∞,
  - –æ–ø–µ—Ä–∞—Ç–æ—Ä—ã,
  - –Ω–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä–∞,
  - –ø—Ä–∏–º–µ—Ä–Ω–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å (–µ—Å–ª–∏ –±—ã–ª–∞).
- –ø—Ä–∏ —Å–∞–±–º–∏—Ç–µ:
  - `PATCH /orders/{id}/` —Å –æ–±–Ω–æ–≤–ª—ë–Ω–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π:
    - –µ—Å–ª–∏ –º–µ–Ω—è–ª–∏—Å—å `items` ‚Äî –æ–Ω–∏ –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è, `total_amount` —Å—á–∏—Ç–∞–µ—Ç—Å—è –ø–æ –Ω–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä–µ;
    - –µ—Å–ª–∏ –º–µ–Ω—è–ª–∞—Å—å —Ç–æ–ª—å–∫–æ `total_amount` ‚Äî –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä—É–µ–º –ø—Ä–∏–º–µ—Ä–Ω—É—é —Å—Ç–æ–∏–º–æ—Å—Ç—å –ø—Ä–æ—Ç–∏–≤ —Å—É–º–º—ã items (–ª–æ–≥–∏–∫–∞ —É–∂–µ –µ—Å—Ç—å –≤ `OrderSerializer.update`).

### 4.6 –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∑–∞—è–≤–∫–∏ (`app/(app)/orders/[orderId]/complete/page.tsx`)

–§–æ—Ä–º–∞ –ø–æ–≤—Ç–æ—Ä—è–µ—Ç Flutter `CompleteOrderScreen` –∏ backend `OrderCompleteSerializer`:

- –ü–æ–ª—è:
  - `end_dt` ‚Äî –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞—è –¥–∞—Ç–∞/–≤—Ä–µ–º—è –æ–∫–æ–Ω—á–∞–Ω–∏—è.
  - `comment` ‚Äî –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π.
  - `items` ‚Äî —Ñ–∏–Ω–∞–ª—å–Ω–∞—è –Ω–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä–∞:
    - –¥–ª—è —Ç–µ—Ö–Ω–∏–∫–∏:
      - `ref_id` (ID —Ç–µ—Ö–Ω–∏–∫–∏ –∏–∑ –∫–∞—Ç–∞–ª–æ–≥–∞);
      - `metadata.shifts` (–∫–æ–ª-–≤–æ —Å–º–µ–Ω);
      - `metadata.hours` (—Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ —á–∞—Å—ã);
      - `tax_rate`, `discount`, `fuel_expense`, `repair_expense`.
    - –¥–ª—è –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤:
      - `ref_id`, `quantity`, `tax_rate`, `discount`.
  - `operator_salaries` ‚Äî —Å–ø–∏—Å–æ–∫:
    - `operator_id`, `salary`.

–ü–æ–≤–µ–¥–µ–Ω–∏–µ:

- –ü—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ:
  - `POST /orders/{id}/complete/` —Å —ç—Ç–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π.
- Backend:
  - —É–¥–∞–ª—è–µ—Ç —Å—Ç–∞—Ä—ã–µ items (–µ—Å–ª–∏ –ø–µ—Ä–µ–¥–∞–Ω—ã –Ω–æ–≤—ã–µ);
  - —Å–æ–∑–¥–∞—ë—Ç –Ω–æ–≤—ã–µ;
  - —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç `total_amount` –ø–æ –Ω–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä–µ;
  - —Å–æ–∑–¥–∞—ë—Ç `SalaryRecord` –ø–æ –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞–º;
  - —Å–æ–∑–¥–∞—ë—Ç `Expense` –ø–æ —Ç–æ–ø–ª–∏–≤—É/—Ä–µ–º–æ–Ω—Ç—É;
  - –º–µ–Ω—è–µ—Ç —Å—Ç–∞—Ç—É—Å `IN_PROGRESS ‚Üí COMPLETED`;
  - –ø–∏—à–µ—Ç –ª–æ–≥ —Å—Ç–∞—Ç—É—Å–æ–≤, —Ç—Ä–∏–≥–≥–µ—Ä–∏—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è.

–ü–æ—Å–ª–µ —É—Å–ø–µ—Ö–∞:
- –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—Å—è –Ω–∞ `/orders/[id]`;
- –ø–æ–∫–∞–∑—ã–≤–∞–µ–º `toast: "–ó–∞—è–≤–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞"`.

---

## 5. –ü—Ä–æ—Ñ–∏–ª—å –∏ –∑–∞—Ä–ø–ª–∞—Ç—ã –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞

### 5.1 –ü—Ä–æ—Ñ–∏–ª—å (`app/(app)/profile/page.tsx`)

–ë–ª–æ–∫–∏:

- –ö–∞—Ä—Ç–æ—á–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:
  - –§–ò–û, —Ä–æ–ª—å (`role_display`), —Ç–µ–ª–µ—Ñ–æ–Ω, email.
- –ù–∞—Å—Ç—Ä–æ–π–∫–∏:
  - —è–∑—ã–∫ (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ –±—Ä–∞—Ç—å `locale`).
- –ö–Ω–æ–ø–∫–∞ ¬´–°–º–µ–Ω–∏—Ç—å –ø–∞—Ä–æ–ª—å¬ª ‚Üí `/profile/password`.

`GET /users/me/` ‚Üí `UserSerializer`.

### 5.2 –°–º–µ–Ω–∞ –ø–∞—Ä–æ–ª—è (`app/(app)/profile/password/page.tsx`)

–§–æ—Ä–º–∞:

- `–°—Ç–∞—Ä—ã–π –ø–∞—Ä–æ–ª—å`.
- `–ù–æ–≤—ã–π –ø–∞—Ä–æ–ª—å`.
- `–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ`.

`POST /users/change-password/`, –æ—à–∏–±–∫–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –æ—Ç—Ä–∞–∂–∞–µ–º –ø–æ –ø–æ–ª—è–º.

### 5.3 –ó–∞—Ä–ø–ª–∞—Ç—ã –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞ (`app/(app)/profile/salary/page.tsx`)

–î–ª—è —Ä–æ–ª–∏ `operator`:

- `GET /users/operator/salary/` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç:
  - `total_salary` ‚Äî —Å—É–º–º–∞—Ä–Ω–∞—è —Å—É–º–º–∞;
  - `salary_records` ‚Äî —Å–ø–∏—Å–æ–∫ –Ω–∞—á–∏—Å–ª–µ–Ω–∏–π;
  - `orders` ‚Äî —Å–ø–∏—Å–æ–∫ –∑–∞–∫–∞–∑–æ–≤ —Å –ø—Ä–∏–≤—è–∑–∫–æ–π –∫ –∑–∞—Ä–ø–ª–∞—Ç–∞–º.

UI:

- –ö–∞—Ä—Ç–æ—á–∫–∞ —Å –æ–±—â–∏–º –∏—Ç–æ–≥–æ–º.
- –¢–∞–±–ª–∏—Ü–∞ –ø–ª–∞—Ç–µ–∂–µ–π –ø–æ –∑–∞–∫–∞–∑–∞–º:
  - ID –∑–∞—è–≤–∫–∏, –Ω–æ–º–µ—Ä, —Å—É–º–º–∞, —Å—Ç–∞—Ç—É—Å, –¥–∞—Ç–∞ –Ω–∞—á–∏—Å–ª–µ–Ω–∏—è/–≤—ã–ø–ª–∞—Ç—ã.

---

## 6. –ö–∞—Ç–∞–ª–æ–≥–∏ (–Ωomen–∫–ª–∞—Ç—É—Ä–∞ –∏ –∫–ª–∏–µ–Ω—Ç—ã)

### 6.1 –¢–µ—Ö–Ω–∏–∫–∞, —É—Å–ª—É–≥–∏, –º–∞—Ç–µ—Ä–∏–∞–ª—ã (`app/(app)/catalog/...`)

–°—Ç—Ä–∞–Ω–∏—Ü—ã:

- `/catalog/equipment`:
  - `GET /equipment/`.
  - –¢–∞–±–ª–∏—Ü–∞ —Ç–µ—Ö–Ω–∏–∫–∏: –∏–º—è, –∫–∞—Ç–µ–≥–æ—Ä–∏—è, —Å—Ç–∞–≤–∫–∞ (–¥–Ω–µ–≤–Ω–∞—è/–ø–æ—á–∞—Å–æ–≤–∞—è), —Å—Ç–∞—Ç—É—Å.
- `/catalog/services`:
  - `GET /services/`.
  - –¢–∞–±–ª–∏—Ü–∞ —É—Å–ª—É–≥.
- `/catalog/materials`:
  - `GET /materials/`.
  - –¢–∞–±–ª–∏—Ü–∞ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ (–≥—Ä—É–Ω—Ç, —Ä–∞—Å—Ö–æ–¥–Ω–∏–∫–∏).

### 6.2 –ö–ª–∏–µ–Ω—Ç—ã (`app/(app)/catalog/clients/page.tsx`)

- `GET /clients/` ‚Äî —Å–ø–∏—Å–æ–∫.
- `POST /clients/` ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ.
- –í —Ñ–æ—Ä–º–µ —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞—è–≤–∫–∏ –º—ã –º–æ–∂–µ–º –ª–∏–±–æ:
  - —Å–æ–∑–¥–∞–≤–∞—Ç—å –∫–ª–∏–µ–Ω—Ç–∞ ¬´–Ω–∞ –ª–µ—Ç—É¬ª (–∫–∞–∫ —Å–µ–π—á–∞—Å –≤ Flutter);
  - –ª–∏–±–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤—ã–ø–∞–¥–∞—é—â–∏–π —Å–ø–∏—Å–æ–∫ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö.

---

## 7. –û—Ñ—Ñ–ª–∞–π–Ω –∏ –∫—ç—à (–∫–∞–∫ –ø–æ–≤—Ç–æ—Ä–∏—Ç—å Flutter)

–í Flutter:
- –µ—Å—Ç—å `CacheService`, `OfflineQueueService`, `SyncService`;
- –∑–∞–∫–∞–∑—ã, –Ω–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä–∞ –∏ –æ—Ç—á—ë—Ç—ã –∫—ç—à–∏—Ä—É—é—Ç—Å—è;
- –ø—Ä–∏ –ø–æ—Ç–µ—Ä–µ —Å–µ—Ç–∏:
  - –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ;
  - –¥–µ–π—Å—Ç–≤–∏—è (—Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞—è–≤–∫–∏, —Å–º–µ–Ω–∞ —Å—Ç–∞—Ç—É—Å–∞) –∫–ª–∞–¥—É—Ç—Å—è –≤ –æ—á–µ—Ä–µ–¥—å –∏ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –ø–æ–∑–∂–µ.

–ù–∞ Next.js:

1. **–ö—ç—à –¥–∞–Ω–Ω—ã—Ö**:
   - –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —á–µ—Ä–µ–∑ React Query + IndexedDB/localStorage:
     - –ø—Ä–∏ —É—Å–ø–µ—à–Ω–æ–º `GET /orders/` ‚Äî —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å JSON –≤ storage;
     - –ø—Ä–∏ —Å–µ—Ç–µ–≤–æ–π –æ—à–∏–±–∫–µ:
       - –ø–æ–ø—ã—Ç–∞—Ç—å—Å—è –ø—Ä–æ—á–∏—Ç–∞—Ç—å storage –∏ –æ—Ç–¥–∞—Ç—å –µ–≥–æ –≤–º–µ—Å—Ç–æ –ø–∞–¥–µ–Ω–∏—è.
   - –¢–æ –∂–µ —Å–∞–º–æ–µ –¥–ª—è —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–æ–≤ (equipment, services, materials).

2. **–û—Ñ—Ñ–ª–∞–π–Ω‚Äë–æ—á–µ—Ä–µ–¥—å**:
   - –û—Ç–¥–µ–ª—å–Ω—ã–π —Å–µ—Ä–≤–∏—Å (–∞–Ω–∞–ª–æ–≥ `OfflineQueueService`):
     - —Ö—Ä–∞–Ω–∏—Ç —Å–ø–∏—Å–æ–∫ –æ–ø–µ—Ä–∞—Ü–∏–π (`createOrder`, `changeStatus`, `completeOrder`) –≤ localStorage/IndexedDB;
     - –ø—Ä–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–∏ —Å–µ—Ç–∏:
       - –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ –ø–æ–≤—Ç–æ—Ä—è–µ—Ç –∑–∞–ø—Ä–æ—Å—ã –∫ backend;
       - –ø–æ—Å–ª–µ —É—Å–ø–µ—Ö–∞ —É–¥–∞–ª—è–µ—Ç —ç–ª–µ–º–µ–Ω—Ç—ã –∏–∑ –æ—á–µ—Ä–µ–¥–∏.
   - UI:
     - –æ—Ç–¥–µ–ª—å–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ `/offline-queue`;
     - –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –≤ —Ö–µ–¥–µ—Ä–µ/–±–∞–Ω–Ω–µ—Ä–µ.

3. **OfflineBanner**:
   - –ö–æ–º–ø–æ–Ω–µ–Ω—Ç, –∫–æ—Ç–æ—Ä—ã–π:
     - —á–µ—Ä–µ–∑ `navigator.onLine` + ping –∫ API –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞;
     - –µ—Å–ª–∏ —Å–µ—Ç–∏ –Ω–µ—Ç ‚Üí –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –±–∞–Ω–Ω–µ—Ä (`"–ù–µ—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è, —Ä–∞–±–æ—Ç–∞–µ–º –∏–∑ –∫–µ—à–∞"`).

---

## 8. –ö–∞–∫ —ç—Ç–∏–º –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –ø—Ä–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ –Ω–∞ Next.js

1. **–°–Ω–∞—á–∞–ª–∞**:
   - —Ä–µ–∞–ª–∏–∑—É–π `useAuthStore` –∏ HTTP‚Äë–∫–ª–∏–µ–Ω—Ç —Å refresh‚Äë–ª–æ–≥–∏–∫–æ–π –ø–æ —ç—Ç–æ–º—É –¥–æ–∫—É–º–µ–Ω—Ç—É;
   - —Å–¥–µ–ª–∞–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã `/login` –∏ –±–∞–∑–æ–≤—ã–π `(app)/layout` —Å –∑–∞–≥–ª—É—à–∫–æ–π ¬´–í—ã –≤–æ—à–ª–∏¬ª.
2. **–ü–æ—Ç–æ–º**:
   - —Ä–µ–∞–ª–∏–∑—É–π `/orders` (—Å–ø–∏—Å–æ–∫) –∏ `/orders/create`;
   - —É–±–µ–¥–∏—Å—å, —á—Ç–æ —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞—è–≤–∫–∏ —á–µ—Ä–µ–∑ API –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—Ç–∞–µ—Ç (—á–µ—Ä–µ–∑ DevTools / Django admin / –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ).
3. **–ó–∞—Ç–µ–º**:
   - –¥–æ–±–∞–≤—å `/orders/[id]` –∏ `/orders/[id]/edit`;
   - –ø–æ—Å–ª–µ —ç—Ç–æ–≥–æ `/orders/[id]/complete`.
4. **–ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ**:
   - –ø—Ä–æ—Ñ–∏–ª—å, –∑–∞—Ä–ø–ª–∞—Ç—ã, –∫–∞—Ç–∞–ª–æ–≥–∏.
5. **–ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ**:
   - –¥–æ–±–∞–≤–ª—è–π –∫—ç—à/–æ—Ñ—Ñ–ª–∞–π–Ω‚Äë–æ—á–µ—Ä–µ–¥—å, –ø–æ–≤—Ç–æ—Ä—è—è –ª–æ–≥–∏–∫—É `OrderService` –∏ `CacheService` –∏–∑ Flutter.

–ï—Å–ª–∏ –ø—Ä–∏–¥–µ—Ä–∂–∏–≤–∞—Ç—å—Å—è —ç—Ç–æ–π —Å—Ö–µ–º—ã –∏ —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Ñ–∞–π–ª–æ–≤ `ReactWeb_Architecture.md` –∏ `ReactWeb_IntegrationMap.md`, —Ç—ã —Å–º–æ–∂–µ—à—å **–ø—Ä–æ—Å—Ç–æ ¬´–ø–µ—Ä–µ–≤–æ–¥–∏—Ç—å¬ª –æ–ø–∏—Å–∞–Ω–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –≤ –∫–æ–¥ Next.js**, –Ω–µ –≤—ã–¥—É–º—ã–≤–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É –∑–∞–Ω–æ–≤–æ –∏ –ø–æ–ª—É—á–∞—è –ø–æ–≤–µ–¥–µ–Ω–∏–µ –æ–¥–∏–Ω –≤ –æ–¥–∏–Ω —Å —Ç–µ–∫—É—â–∏–º –º–æ–±–∏–ª—å–Ω—ã–º –∫–ª–∏–µ–Ω—Ç–æ–º.

