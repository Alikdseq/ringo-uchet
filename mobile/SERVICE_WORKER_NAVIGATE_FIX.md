# ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–∫–∏ Service Worker —Å navigate –∑–∞–ø—Ä–æ—Å–∞–º–∏

## üîç –ü—Ä–æ–±–ª–µ–º–∞

–û—à–∏–±–∫–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞:
```
/service-worker.js:142 [Service Worker] Fetch attempt 1 failed: Failed to construct 'Request': Cannot construct a Request with a RequestInit whose mode member is set as 'navigate'.
/service-worker.js:142 [Service Worker] Fetch attempt 2 failed: Failed to construct a Request: Cannot construct a Request with a RequestInit whose mode member is set as 'navigate'.
/service-worker.js:278 [Service Worker] Navigation request failed: Failed to construct a Request: Cannot construct a Request with a RequestInit whose mode member is set as 'navigate'.
```

## üîß –ü—Ä–∏—á–∏–Ω–∞

–í —Ñ—É–Ω–∫—Ü–∏–∏ `fetchWithRetry` –ø—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –ø–æ–ø—ã—Ç–∫–∞—Ö (retry) —Å–æ–∑–¥–∞–≤–∞–ª—Å—è –Ω–æ–≤—ã–π `Request` –æ–±—ä–µ–∫—Ç —Å –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ–º –≤—Å–µ—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤, –≤–∫–ª—é—á–∞—è `mode: 'navigate'`. 

**–ü—Ä–æ–±–ª–µ–º–∞:** –í Service Worker fetch —Å–æ–±—ã—Ç–∏—è—Ö –Ω–µ–ª—å–∑—è —Å–æ–∑–¥–∞–≤–∞—Ç—å –Ω–æ–≤—ã–π `Request` –æ–±—ä–µ–∫—Ç —Å `mode: 'navigate'`. –≠—Ç–æ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –±—Ä–∞—É–∑–µ—Ä–∞ - navigate mode –º–æ–∂–µ—Ç –±—ã—Ç—å —Ç–æ–ª—å–∫–æ —É –∏—Å—Ö–æ–¥–Ω–æ–≥–æ request –æ–±—ä–µ–∫—Ç–∞.

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

**–§–∞–π–ª:** `mobile/web/service-worker.js`

### –ò–∑–º–µ–Ω–µ–Ω–∏—è:

1. **–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ navigate –∑–∞–ø—Ä–æ—Å–æ–≤:**
   ```javascript
   const isNavigateRequest = request.mode === 'navigate';
   ```

2. **–£—Å–ª–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ –¥–ª—è navigate –∑–∞–ø—Ä–æ—Å–æ–≤:**
   - –î–ª—è navigate –∑–∞–ø—Ä–æ—Å–æ–≤: –∏—Å–ø–æ–ª—å–∑—É–µ–º –∏—Å—Ö–æ–¥–Ω—ã–π `request` –æ–±—ä–µ–∫—Ç –Ω–∞–ø—Ä—è–º—É—é
   - –î–ª—è –æ—Å—Ç–∞–ª—å–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤: —Å–æ–∑–¥–∞–µ–º –Ω–æ–≤—ã–π `Request` –æ–±—ä–µ–∫—Ç –∫–∞–∫ —Ä–∞–Ω—å—à–µ

3. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ request:**
   ```javascript
   const requestToUse = isNavigateRequest 
     ? request  // –î–ª—è navigate –∏—Å–ø–æ–ª—å–∑—É–µ–º –∏—Å—Ö–æ–¥–Ω—ã–π request
     : new Request(url, init);  // –î–ª—è –æ—Å—Ç–∞–ª—å–Ω—ã—Ö —Å–æ–∑–¥–∞–µ–º –Ω–æ–≤—ã–π
   ```

## üìù –î–µ—Ç–∞–ª–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### –î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
```javascript
// –í—Å–µ–≥–¥–∞ —Å–æ–∑–¥–∞–≤–∞–ª—Å—è –Ω–æ–≤—ã–π Request, –≤–∫–ª—é—á–∞—è navigate –∑–∞–ø—Ä–æ—Å—ã
const newRequest = new Request(url, init); // ‚ùå –û—à–∏–±–∫–∞ –¥–ª—è mode: 'navigate'
```

### –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
```javascript
// –î–ª—è navigate –∏—Å–ø–æ–ª—å–∑—É–µ–º –∏—Å—Ö–æ–¥–Ω—ã–π request –Ω–∞–ø—Ä—è–º—É—é
const requestToUse = isNavigateRequest 
  ? request  // ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ–º –∏—Å—Ö–æ–¥–Ω—ã–π request
  : new Request(url, init);  // –î–ª—è –æ—Å—Ç–∞–ª—å–Ω—ã—Ö —Å–æ–∑–¥–∞–µ–º –Ω–æ–≤—ã–π
```

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç

‚úÖ **–û—à–∏–±–∫–∏ —É—Å—Ç—Ä–∞–Ω–µ–Ω—ã** - –±–æ–ª—å—à–µ –Ω–µ—Ç –ø–æ–ø—ã—Ç–æ–∫ —Å–æ–∑–¥–∞—Ç—å Request —Å mode: 'navigate'  
‚úÖ **Retry —Ä–∞–±–æ—Ç–∞–µ—Ç** - navigate –∑–∞–ø—Ä–æ—Å—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è —Å –ø–æ–≤—Ç–æ—Ä–Ω—ã–º–∏ –ø–æ–ø—ã—Ç–∫–∞–º–∏  
‚úÖ **Service Worker —Ä–∞–±–æ—Ç–∞–µ—Ç** - –≤—Å–µ —Ç–∏–ø—ã –∑–∞–ø—Ä–æ—Å–æ–≤ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ

## üìä –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å

- **–§–∞–π–ª:** `mobile/web/service-worker.js`
- **–§—É–Ω–∫—Ü–∏—è:** `fetchWithRetry`
- **–õ–æ–≥–∏–∫–∞:** –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ navigate –∑–∞–ø—Ä–æ—Å—ã –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∏—Å—Ö–æ–¥–Ω–æ–≥–æ request –æ–±—ä–µ–∫—Ç–∞

---

## ‚ö†Ô∏è –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

**–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –±—Ä–∞—É–∑–µ—Ä–∞:**
- –í Service Worker fetch —Å–æ–±—ã—Ç–∏—è—Ö –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –∏—Å—Ö–æ–¥–Ω—ã–π request –æ–±—ä–µ–∫—Ç —Å `mode: 'navigate'`
- –ù–µ–ª—å–∑—è —Å–æ–∑–¥–∞–≤–∞—Ç—å –Ω–æ–≤—ã–π Request —Å `mode: 'navigate'` –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ

**–†–µ—à–µ–Ω–∏–µ:**
- –î–ª—è navigate –∑–∞–ø—Ä–æ—Å–æ–≤ –∏—Å–ø–æ–ª—å–∑—É–µ–º –∏—Å—Ö–æ–¥–Ω—ã–π request –æ–±—ä–µ–∫—Ç –Ω–∞–ø—Ä—è–º—É—é
- –î–ª—è –æ—Å—Ç–∞–ª—å–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –ø—Ä–æ–¥–æ–ª–∂–∞–µ–º —Å–æ–∑–¥–∞–≤–∞—Ç—å –Ω–æ–≤—ã–π Request –æ–±—ä–µ–∫—Ç –¥–ª—è retry

---

## ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –∏ –≥–æ—Ç–æ–≤–æ –∫ –¥–µ–ø–ª–æ—é

–û—à–∏–±–∫–∏ Service Worker –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã, –∞—Ä—Ö–∏–≤ –≥–æ—Ç–æ–≤ –∫ –¥–µ–ø–ª–æ—é.

