# üìã –ü–ª–∞–Ω –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –º–æ–º–µ–Ω—Ç–∞–ª—å–Ω–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –æ—Ç—á–µ—Ç–æ–≤

## üîç –ü—Ä–æ–±–ª–µ–º–∞

1. **–ü—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω–æ–π –∑–∞—è–≤–∫–∏** - –æ—Ç—á–µ—Ç—ã –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è, –Ω–æ –Ω–µ —Å—Ä–∞–∑—É (–Ω—É–∂–Ω–æ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞—Ç—å —ç–∫—Ä–∞–Ω –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑)
2. **–ü—Ä–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ –∑–∞—è–≤–∫–∏** - –æ—Ç—á–µ—Ç—ã –Ω–µ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è —Å—Ä–∞–∑—É, –Ω—É–∂–Ω–æ –∂–¥–∞—Ç—å –∏–ª–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞—Ç—å

## üîß –ù–∞–π–¥–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

1. ‚úÖ –ü—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –∑–∞—è–≤–∫–∏ –µ—Å—Ç—å –≤—ã–∑–æ–≤ `reportsRefreshProvider.notifier.state++` (—Å—Ç—Ä–æ–∫–∞ 1106)
2. ‚ùå –ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å—Ç–∞—Ç—É—Å–∞ –∑–∞—è–≤–∫–∏ (–≤–∫–ª—é—á–∞—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ) –ù–ï–¢ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –æ—Ç—á–µ—Ç–æ–≤
3. ‚ùå –ü—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –∑–∞—è–≤–∫–∏ (updateOrder) –Ω–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –æ—Ç—á–µ—Ç–æ–≤

## ‚úÖ –ü–ª–∞–Ω –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### 1. –î–æ–±–∞–≤–∏—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Ç—á–µ—Ç–æ–≤ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å—Ç–∞—Ç—É—Å–∞ –∑–∞—è–≤–∫–∏

**–§–∞–π–ª:** `mobile/lib/features/orders/screens/order_detail_screen.dart`
**–ú–µ—Ç–æ–¥:** `_changeStatus` (—Å—Ç—Ä–æ–∫–∞ 133)

**–î–µ–π—Å—Ç–≤–∏–µ:** –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞ –≤—ã–∑–≤–∞—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Ç—á–µ—Ç–æ–≤:
```dart
ref.read(reportsRefreshProvider.notifier).state++;
```

**–û—Å–æ–±–µ–Ω–Ω–æ –≤–∞–∂–Ω–æ:** –ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å—Ç–∞—Ç—É—Å–∞ –Ω–∞ `completed` - –æ—Ç—á–µ—Ç—ã –¥–æ–ª–∂–Ω—ã –æ–±–Ω–æ–≤–∏—Ç—å—Å—è –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ.

### 2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Ç—á–µ—Ç–æ–≤ –ø—Ä–∏ updateOrder

**–§–∞–π–ª:** `mobile/lib/features/orders/services/order_service.dart`
**–ú–µ—Ç–æ–¥:** `updateOrder` (—Å—Ç—Ä–æ–∫–∞ 180)

**–î–µ–π—Å—Ç–≤–∏–µ:** –ï—Å–ª–∏ —Å—Ç–∞—Ç—É—Å –∑–∞—è–≤–∫–∏ –º–µ–Ω—è–µ—Ç—Å—è (–æ—Å–æ–±–µ–Ω–Ω–æ –Ω–∞ completed), –Ω—É–∂–Ω–æ —Ç—Ä–∏–≥–≥–µ—Ä–∏—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Ç—á–µ—Ç–æ–≤. –ù–æ —ç—Ç–æ —Å–ª–æ–∂–Ω–µ–µ - –Ω—É–∂–Ω–æ —Å—Ä–∞–≤–Ω–∏–≤–∞—Ç—å —Å—Ç–∞—Ä—ã–π –∏ –Ω–æ–≤—ã–π —Å—Ç–∞—Ç—É—Å.

**–†–µ—à–µ–Ω–∏–µ:** –û–±–Ω–æ–≤–ª—è—Ç—å –æ—Ç—á–µ—Ç—ã –ø—Ä–∏ –ª—é–±–æ–º updateOrder, —Ç–∞–∫ –∫–∞–∫ —Å—Ç–∞—Ç—É—Å –º–æ–∂–µ—Ç –∏–∑–º–µ–Ω–∏—Ç—å—Å—è —á–µ—Ä–µ–∑ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ.

### 3. –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ –æ—Ç—á–µ—Ç—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Å–ª—É—à–∞—é—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è

**–§–∞–π–ª:** `mobile/lib/features/finance/screens/reports_screen.dart`

**–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:** –û—Ç—á–µ—Ç—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç `ValueKey` —Å `refreshKey` –∏–∑ `reportsRefreshProvider`, —á—Ç–æ –¥–æ–ª–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ.

**–ü—Ä–æ–≤–µ—Ä–∫–∞:** –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ –≤—Å–µ —Ç–∞–±—ã –æ—Ç—á–µ—Ç–æ–≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –ø–µ—Ä–µ—Å–æ–∑–¥–∞—é—Ç—Å—è –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ `refreshKey`.

---

## üìù –ü–æ—à–∞–≥–æ–≤–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

### –®–∞–≥ 1: –î–æ–±–∞–≤–∏—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Ç—á–µ—Ç–æ–≤ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å—Ç–∞—Ç—É—Å–∞

–í –º–µ—Ç–æ–¥–µ `_changeStatus` –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞:
```dart
await orderService.changeOrderStatus(widget.orderId, result);
await _loadOrder();
// –î–û–ë–ê–í–ò–¢–¨: –û–±–Ω–æ–≤–ª—è–µ–º –æ—Ç—á–µ—Ç—ã
ref.read(reportsRefreshProvider.notifier).state++;
```

### –®–∞–≥ 2: –î–æ–±–∞–≤–∏—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Ç—á–µ—Ç–æ–≤ –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –∑–∞—è–≤–∫–∏

–í –º–µ—Ç–æ–¥–µ `updateOrder` –≤ —Å–µ—Ä–≤–∏—Å–µ - –Ω–æ —ç—Ç–æ —Å–ª–æ–∂–Ω–µ–µ, —Ç–∞–∫ –∫–∞–∫ –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–¥–∞—Ç—å ref. –õ—É—á—à–µ —Å–¥–µ–ª–∞—Ç—å —ç—Ç–æ –Ω–∞ —É—Ä–æ–≤–Ω–µ —ç–∫—Ä–∞–Ω–∞, –≥–¥–µ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è updateOrder.

–ù–æ —Å–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–≤–µ—Ä–∏–º –≥–¥–µ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è updateOrder - –≤–æ–∑–º–æ–∂–Ω–æ —ç—Ç–æ —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, –∏ —Ç–∞–º –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Ç—á–µ—Ç–æ–≤.

### –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –æ—Ç—á–µ—Ç—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Ä–µ–∞–≥–∏—Ä—É—é—Ç

–£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ ValueKey –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –∏ —Ç–∞–±—ã –ø–µ—Ä–µ—Å–æ–∑–¥–∞—é—Ç—Å—è –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ refreshKey.

---

## üéØ –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
- ‚úÖ –ü—Ä–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ –∑–∞—è–≤–∫–∏ –æ—Ç—á–µ—Ç—ã –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –º–æ–º–µ–Ω—Ç–∞–ª—å–Ω–æ
- ‚úÖ –ü—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω–æ–π –∑–∞—è–≤–∫–∏ –æ—Ç—á–µ—Ç—ã –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –º–æ–º–µ–Ω—Ç–∞–ª—å–Ω–æ
- ‚úÖ –ü—Ä–∏ –ª—é–±–æ–º –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å—Ç–∞—Ç—É—Å–∞ –∑–∞—è–≤–∫–∏ –æ—Ç—á–µ—Ç—ã –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è
- ‚úÖ –ù–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ —ç–∫—Ä–∞–Ω–∞

