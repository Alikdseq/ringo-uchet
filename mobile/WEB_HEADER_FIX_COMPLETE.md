# ‚úÖ –ü–æ–ª–Ω–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã "Refused to set unsafe header 'Accept-Encoding'"

## üîç –ö–æ—Ä–Ω–µ–≤–∞—è –ø—Ä–∏—á–∏–Ω–∞ –ø—Ä–æ–±–ª–µ–º—ã

–ë—Ä–∞—É–∑–µ—Ä—ã **–Ω–µ –ø–æ–∑–≤–æ–ª—è—é—Ç** —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å –∑–∞–≥–æ–ª–æ–≤–æ–∫ `Accept-Encoding` –≤—Ä—É—á–Ω—É—é —á–µ—Ä–µ–∑ JavaScript/Dart, —Ç–∞–∫ –∫–∞–∫ –æ–Ω–∏ —É–ø—Ä–∞–≤–ª—è—é—Ç —ç—Ç–∏–º –∑–∞–≥–æ–ª–æ–≤–∫–æ–º **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏**. –ü–æ–ø—ã—Ç–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –µ–≥–æ –≤—ã–∑—ã–≤–∞–µ—Ç –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –≤ –∫–æ–Ω—Å–æ–ª–∏.

## ‚úÖ –†–µ—à–µ–Ω–∏–µ –Ω–∞ —É—Ä–æ–≤–Ω–µ –∫–æ—Ä–Ω—è

### 1. –°–æ–∑–¥–∞–Ω –≥–ª–æ–±–∞–ª—å–Ω—ã–π WebHeaderInterceptor

**–§–∞–π–ª:** `mobile/lib/core/network/interceptors/web_header_interceptor.dart`

–≠—Ç–æ—Ç interceptor:
- –†–∞–±–æ—Ç–∞–µ—Ç **–ü–ï–†–í–´–ú** –≤ —Ü–µ–ø–æ—á–∫–µ interceptors
- **–ì–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ** —É–¥–∞–ª—è–µ—Ç `Accept-Encoding` –¥–ª—è –≤—Å–µ—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –Ω–∞ –≤–µ–±-–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ
- –£–¥–∞–ª—è–µ—Ç –∏ –¥—Ä—É–≥–∏–µ –Ω–µ–±–µ–∑–æ–ø–∞—Å–Ω—ã–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏ (Connection, Host, Referer, User-Agent)

### 2. –û–±–Ω–æ–≤–ª–µ–Ω dio_client.dart

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- –î–æ–±–∞–≤–ª–µ–Ω `WebHeaderInterceptor` –∫–∞–∫ **–ø–µ—Ä–≤—ã–π** interceptor
- –£–±—Ä–∞–Ω–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∞ `Accept-Encoding` –¥–ª—è –≤–µ–±-–ø–ª–∞—Ç—Ñ–æ—Ä–º—ã –≤ –±–∞–∑–æ–≤—ã—Ö –∑–∞–≥–æ–ª–æ–≤–∫–∞—Ö
- –î–æ–±–∞–≤–ª–µ–Ω–∞ —è–≤–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∏ —É–¥–∞–ª–µ–Ω–∏–µ –∑–∞–≥–æ–ª–æ–≤–∫–∞

### 3. –û–±–Ω–æ–≤–ª–µ–Ω—ã –≤—Å–µ interceptors

**AuthInterceptor:**
- –£–¥–∞–ª—è–µ—Ç `Accept-Encoding` –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∑–∞–ø—Ä–æ—Å–µ
- –£–¥–∞–ª—è–µ—Ç `Accept-Encoding` –ø—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–∞—Ö –ø–æ—Å–ª–µ refresh token
- –£–¥–∞–ª—è–µ—Ç `Accept-Encoding` –¥–ª—è –≤—Å–µ—Ö pending requests

**RetryInterceptor:**
- –£–¥–∞–ª—è–µ—Ç `Accept-Encoding` –ø—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –ø–æ–ø—ã—Ç–∫–∞—Ö –∑–∞–ø—Ä–æ—Å–æ–≤

### 4. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ —Å–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ Dio

–í `AuthInterceptor` –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –Ω–æ–≤–æ–≥–æ Dio –¥–ª—è –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤:
- –ù–µ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è `Accept-Encoding` –¥–ª—è –≤–µ–±-–ø–ª–∞—Ç—Ñ–æ—Ä–º—ã
- –î–æ–±–∞–≤–ª—è–µ—Ç—Å—è `WebHeaderInterceptor` –¥–ª—è –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —É–¥–∞–ª–µ–Ω–∏—è –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤

---

## üìã –ü–æ—Ä—è–¥–æ–∫ interceptors (–≤–∞–∂–Ω–æ!)

```dart
1. WebHeaderInterceptor    // –ü–ï–†–í–´–ú - —É–¥–∞–ª—è–µ—Ç –Ω–µ–±–µ–∑–æ–ø–∞—Å–Ω—ã–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏
2. AuthInterceptor         // –î–æ–±–∞–≤–ª—è–µ—Ç —Ç–æ–∫–µ–Ω—ã –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
3. ErrorInterceptor        // –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –æ—à–∏–±–∫–∏
4. RetryInterceptor       // –ü–æ–≤—Ç–æ—Ä—è–µ—Ç –∑–∞–ø—Ä–æ—Å—ã –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö
```

---

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ü–æ—á–µ–º—É —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:

1. **WebHeaderInterceptor –ø–µ—Ä–≤—ã–º** - –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ –Ω–µ–±–µ–∑–æ–ø–∞—Å–Ω—ã–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏ —É–¥–∞–ª—è—é—Ç—Å—è –¥–æ —Ç–æ–≥–æ, –∫–∞–∫ –∑–∞–ø—Ä–æ—Å –ø–æ–ø–∞–¥–µ—Ç –≤ –¥—Ä—É–≥–∏–µ interceptors
2. **–ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏** - –¥–∞–∂–µ –µ—Å–ª–∏ –∑–∞–≥–æ–ª–æ–≤–æ–∫ –∫–∞–∫–∏–º-—Ç–æ –æ–±—Ä–∞–∑–æ–º –ø–æ—è–≤–∏—Ç—Å—è, –æ–Ω –±—É–¥–µ—Ç —É–¥–∞–ª–µ–Ω –Ω–∞ –∫–∞–∂–¥–æ–º —ç—Ç–∞–ø–µ
3. **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞** - —É–¥–∞–ª—è–µ–º –∏ `Accept-Encoding` –∏ `accept-encoding` –Ω–∞ —Å–ª—É—á–∞–π —Ä–∞–∑–Ω–æ–≥–æ —Ä–µ–≥–∏—Å—Ç—Ä–∞

### –ß—Ç–æ —É–¥–∞–ª—è–µ—Ç—Å—è –¥–ª—è –≤–µ–±-–ø–ª–∞—Ç—Ñ–æ—Ä–º—ã:

- `Accept-Encoding` / `accept-encoding` - –±—Ä–∞—É–∑–µ—Ä —É–ø—Ä–∞–≤–ª—è–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- `Connection` / `connection` - –±—Ä–∞—É–∑–µ—Ä —É–ø—Ä–∞–≤–ª—è–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- `Host` / `host` - –±—Ä–∞—É–∑–µ—Ä —É–ø—Ä–∞–≤–ª—è–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- `Referer` / `referer` - –±—Ä–∞—É–∑–µ—Ä —É–ø—Ä–∞–≤–ª—è–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- `User-Agent` / `user-agent` - –±—Ä–∞—É–∑–µ—Ä —É–ø—Ä–∞–≤–ª—è–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

---

## ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç

–ü–æ—Å–ª–µ —ç—Ç–∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π:
- ‚úÖ **–ù–µ—Ç –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π** "Refused to set unsafe header 'Accept-Encoding'"
- ‚úÖ **–í—Å–µ –∑–∞–ø—Ä–æ—Å—ã —Ä–∞–±–æ—Ç–∞—é—Ç** –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –Ω–∞ –≤–µ–±-–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ
- ‚úÖ **–ë—Ä–∞—É–∑–µ—Ä –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏** –¥–æ–±–∞–≤–ª—è–µ—Ç Accept-Encoding –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
- ‚úÖ **–°–∂–∞—Ç–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç** - –±—Ä–∞—É–∑–µ—Ä —Å–∞–º —É–ø—Ä–∞–≤–ª—è–µ—Ç gzip/deflate

---

## üöÄ –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å

### 1. –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å –≤–µ–±-–≤–µ—Ä—Å–∏—é:

```powershell
cd mobile
flutter clean
flutter pub get
flutter build web --release --tree-shake-icons --web-renderer html
```

### 2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤ –±—Ä–∞—É–∑–µ—Ä–µ:

–û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞ (F12) –∏ —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ:
- ‚úÖ –ù–µ—Ç –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π "Refused to set unsafe header 'Accept-Encoding'"
- ‚úÖ –í—Å–µ –∑–∞–ø—Ä–æ—Å—ã –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è —É—Å–ø–µ—à–Ω–æ
- ‚úÖ –í Network tab –≤–∏–¥–Ω–æ, —á—Ç–æ –±—Ä–∞—É–∑–µ—Ä —Å–∞–º –¥–æ–±–∞–≤–∏–ª `Accept-Encoding: gzip, deflate, br`

---

## üìù –ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

1. ‚úÖ `mobile/lib/core/network/interceptors/web_header_interceptor.dart` - **–ù–û–í–´–ô**
2. ‚úÖ `mobile/lib/core/network/dio_client.dart` - –¥–æ–±–∞–≤–ª–µ–Ω WebHeaderInterceptor
3. ‚úÖ `mobile/lib/core/network/interceptors/auth_interceptor.dart` - —É–ª—É—á—à–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤
4. ‚úÖ `mobile/lib/core/network/interceptors/retry_interceptor.dart` - —É–ª—É—á—à–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤

---

## üí° –ü–æ—á–µ–º—É —ç—Ç–æ —Ä–µ—à–µ–Ω–∏–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ

1. **–ì–ª–æ–±–∞–ª—å–Ω—ã–π –ø–æ–¥—Ö–æ–¥** - WebHeaderInterceptor –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç –í–°–ï –∑–∞–ø—Ä–æ—Å—ã
2. **–ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–∞—è –∑–∞—â–∏—Ç–∞** - –∑–∞–≥–æ–ª–æ–≤–æ–∫ —É–¥–∞–ª—è–µ—Ç—Å—è –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —É—Ä–æ–≤–Ω—è—Ö
3. **–ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫** - interceptor —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–µ—Ä–≤—ã–º –≤ —Ü–µ–ø–æ—á–∫–µ
4. **–£—á–µ—Ç –≤—Å–µ—Ö —Å–ª—É—á–∞–µ–≤** - –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –∏ –Ω–æ–≤—ã–µ Dio —ç–∫–∑–µ–º–ø–ª—è—Ä—ã

---

**–î–∞—Ç–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:** 2024  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –Ω–∞ —É—Ä–æ–≤–Ω–µ –∫–æ—Ä–Ω—è

